<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>spring | 不爱吃鸭脖</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="晋华的个人博客">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d9c8cf8c.css" as="style"><link rel="preload" href="/assets/js/app.7087f587.js" as="script"><link rel="preload" href="/assets/js/2.e7663ce2.js" as="script"><link rel="preload" href="/assets/js/11.f6e4b5e5.js" as="script"><link rel="prefetch" href="/assets/js/10.1f7e226f.js"><link rel="prefetch" href="/assets/js/12.fc105dd9.js"><link rel="prefetch" href="/assets/js/13.af686786.js"><link rel="prefetch" href="/assets/js/14.b8a0a679.js"><link rel="prefetch" href="/assets/js/15.28175aeb.js"><link rel="prefetch" href="/assets/js/16.5de6a1ae.js"><link rel="prefetch" href="/assets/js/17.83f91d5b.js"><link rel="prefetch" href="/assets/js/18.c25ff30b.js"><link rel="prefetch" href="/assets/js/19.9eb4ef0f.js"><link rel="prefetch" href="/assets/js/20.6a684d39.js"><link rel="prefetch" href="/assets/js/21.95b0c4ac.js"><link rel="prefetch" href="/assets/js/22.e5cf9121.js"><link rel="prefetch" href="/assets/js/23.8d6ef789.js"><link rel="prefetch" href="/assets/js/24.83813c9e.js"><link rel="prefetch" href="/assets/js/25.669474a8.js"><link rel="prefetch" href="/assets/js/26.3287bee0.js"><link rel="prefetch" href="/assets/js/27.3841e5e7.js"><link rel="prefetch" href="/assets/js/28.cb5633ac.js"><link rel="prefetch" href="/assets/js/29.a1a1cb6d.js"><link rel="prefetch" href="/assets/js/3.c4ac17a7.js"><link rel="prefetch" href="/assets/js/30.52a15d68.js"><link rel="prefetch" href="/assets/js/31.a07d8889.js"><link rel="prefetch" href="/assets/js/32.d09edb84.js"><link rel="prefetch" href="/assets/js/33.06ef6d42.js"><link rel="prefetch" href="/assets/js/34.6da289f6.js"><link rel="prefetch" href="/assets/js/35.ee22a4e9.js"><link rel="prefetch" href="/assets/js/36.8d8c7fba.js"><link rel="prefetch" href="/assets/js/37.b28f22e1.js"><link rel="prefetch" href="/assets/js/4.242d147b.js"><link rel="prefetch" href="/assets/js/5.b37386e0.js"><link rel="prefetch" href="/assets/js/6.ccd319ae.js"><link rel="prefetch" href="/assets/js/7.80d5da9b.js"><link rel="prefetch" href="/assets/js/8.47418624.js"><link rel="prefetch" href="/assets/js/9.e059bdba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9c8cf8c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="不爱吃鸭脖" class="logo"> <span class="site-name can-hide">不爱吃鸭脖</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a9075a/" class="nav-link">Java</a></div><div class="nav-item"><a href="/pages/bc95b0/" class="nav-link">算法</a></div><div class="nav-item"><a href="/pages/6b46d1/" class="nav-link">k8s</a></div><div class="nav-item"><a href="/pages/652125/" class="nav-link">日常</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/jinhua0" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>不爱吃鸭脖</h3> <span>小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a9075a/" class="nav-link">Java</a></div><div class="nav-item"><a href="/pages/bc95b0/" class="nav-link">算法</a></div><div class="nav-item"><a href="/pages/6b46d1/" class="nav-link">k8s</a></div><div class="nav-item"><a href="/pages/652125/" class="nav-link">日常</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/jinhua0" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java虚拟机</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c95070/" aria-current="page" class="active sidebar-link">spring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c95070/#基础" class="sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring是什么" class="sidebar-link">Spring是什么</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring有什么特性" class="sidebar-link">Spring有什么特性</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#事务的两种实现方式" class="sidebar-link">事务的两种实现方式</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#模板方法作用" class="sidebar-link">模板方法作用</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-常用注解" class="sidebar-link">Spring 常用注解</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring中应用了哪些设计模式" class="sidebar-link">Spring中应用了哪些设计模式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#ioc" class="sidebar-link">IOC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#什么是ioc-什么是di" class="sidebar-link">什么是IOC，什么是DI</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#di方式" class="sidebar-link">DI方式</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#beanfactory" class="sidebar-link">BeanFactory</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#beanfactory-与-factorybean" class="sidebar-link">BeanFactory 与 FactoryBean</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#applicantcontext" class="sidebar-link">ApplicantContext</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-bean-的生命周期" class="sidebar-link">Spring Bean 的生命周期</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-为什么要自动装配啊" class="sidebar-link">Spring 为什么要自动装配啊</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#单例bean是线程安全的嘛" class="sidebar-link">单例Bean是线程安全的嘛</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#解决线程安全问题" class="sidebar-link">解决线程安全问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#为什么会出现循环依赖问题" class="sidebar-link">为什么会出现循环依赖问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#怎么解决循环依赖问题" class="sidebar-link">怎么解决循环依赖问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#aop" class="sidebar-link">AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#什么是aop-应用场景" class="sidebar-link">什么是AOP，应用场景</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#jdk动态代理-和-cglib动态代理" class="sidebar-link">JDK动态代理 和 CGlib动态代理</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-aop-和-aspectj-aop之间的区别" class="sidebar-link">Spring AOP 和 AspectJ AOP之间的区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#什么是编译时、加载时、运行时" class="sidebar-link">什么是编译时、加载时、运行时</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring事务种类" class="sidebar-link">Spring事务种类</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring事务的隔离级别" class="sidebar-link">Spring事务的隔离级别</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring事务传播机制是干嘛的" class="sidebar-link">Spring事务传播机制是干嘛的</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#mvc" class="sidebar-link">MVC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-mvc的核心组件以及工作流程" class="sidebar-link">Spring MVC的核心组件以及工作流程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#mybatis" class="sidebar-link">MyBatis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#与-之间的区别" class="sidebar-link">#{} 与 ${}之间的区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#日志级别" class="sidebar-link">日志级别</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#springboot" class="sidebar-link">SpringBoot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#为什么还会出现spring-boot" class="sidebar-link">为什么还会出现Spring Boot</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-boot自动装配原理" class="sidebar-link">Spring Boot自动装配原理</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-boot-启动原理" class="sidebar-link">Spring Boot 启动原理</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#springcloud" class="sidebar-link">SpringCloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#为什么会出现spring-cloud呢" class="sidebar-link">为什么会出现Spring Cloud呢</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#有哪些微服务的框架" class="sidebar-link">有哪些微服务的框架</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-cloud-netflix有哪些微服务组件" class="sidebar-link">Spring Cloud Netflix有哪些微服务组件</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#spring-cloud-alibaba中有哪些微服务的组件" class="sidebar-link">Spring Cloud Alibaba中有哪些微服务的组件</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#微服务组件" class="sidebar-link">微服务组件</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#eureka的基本使用" class="sidebar-link">Eureka的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#nacos的使用" class="sidebar-link">Nacos的使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#ribbon的基本使用" class="sidebar-link">Ribbon的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#hytrix的使用" class="sidebar-link">Hytrix的使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#sentinel的基本使用" class="sidebar-link">Sentinel的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#feign的基本使用" class="sidebar-link">Feign的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#dubbo的基本使用" class="sidebar-link">Dubbo的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#zuul的基本使用" class="sidebar-link">zuul的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#gateway的基本使用" class="sidebar-link">gateway的基本使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c95070/#sleuth、zipkin的基本使用" class="sidebar-link">sleuth、zipkin的基本使用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c95070/#kubenetes" class="sidebar-link">Kubenetes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c95070/#pod" class="sidebar-link">Pod</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#pod-重启策略" class="sidebar-link">Pod 重启策略</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#pod调度" class="sidebar-link">Pod调度</a></li><li class="sidebar-sub-header level3"><a href="/pages/c95070/#pod控制器" class="sidebar-link">Pod控制器</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>消息队列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java" title="分类" data-v-06225672>Java</a></li><li data-v-06225672><a href="/categories/?category=Spring" title="分类" data-v-06225672>Spring</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/jinhua0" target="_blank" title="作者" class="beLink" data-v-06225672>jinhua</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">spring<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h2> <h3 id="spring是什么"><a href="#spring是什么" class="header-anchor">#</a> Spring是什么</h3> <p>Spring 是一个开源的框架，旨在解决企业应用开发的复杂性。它是一个轻量级的控制反转（IoC）和面向切面（AOP）的容器框架。Spring 的理念是使现有的技术更加容易使用，本身是一个大杂烩，整合了现有的技术框架。</p> <h3 id="spring有什么特性"><a href="#spring有什么特性" class="header-anchor">#</a> Spring有什么特性</h3> <p>Spring 拥有许多特性，使其成为一个非常受欢迎的框架。其中一些主要特性包括：</p> <ul><li><strong>控制反转（IoC）</strong>：Spring 提供了一个 IoC 容器，将对象间的依赖关系交由 Spring 进行控制，从而实现了解耦。</li> <li><strong>面向切面编程（AOP）</strong>：Spring 提供了 AOP 功能，方便进行面向切面的编程，许多不容易用传统 OOP 实现的功能可以通过 AOP 轻松应付。</li> <li><strong>声明式事务管理</strong>：Spring 支持声明式事务管理，可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明式方式灵活地进行事务管理，提高开发效率和质量。</li> <li><strong>与其他框架的集成</strong>：Spring 可以与其他优秀的框架（如 Spring MVC、MyBatis、Struts2、Hibernate 等）集成，提供更多功能。</li></ul> <h3 id="事务的两种实现方式"><a href="#事务的两种实现方式" class="header-anchor">#</a> 事务的两种实现方式</h3> <p>事务的两种方式一般指的是编程式事务和声明式事务。</p> <ul><li><strong>编程式事务</strong>：指的是在代码中显式地控制事务的开始、提交、回滚等操作。这种方式可以给予开发者更大的灵活性，但也增加了编码的复杂度和维护成本。一般来说，编程式事务有两种方法可以实现：模板事务的方式（TransactionTemplate）和平台事务管理器方式（PlatformTransactionManager）。</li> <li><strong>声明式事务</strong>：指的是通过配置或注解来声明某个方法或类需要进行事务管理，而不需要在代码中进行事务操作。这种方式可以简化开发过程，让开发者只关注业务逻辑，而不用担心事务的细节。一般来说，声明式事务有两种方式可以实现：通过XML配置或通过注解。</li></ul> <p>下面是一个使用注解实现声明式事务的例子：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Transactional</span> <span class="token comment">// 声明该方法需要进行事务管理</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> from<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">reduceMoney</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 扣钱</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 模拟异常</span>
        userDao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加钱</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>下面是一个使用 <code>TransactionTemplate</code> 实现编程式事务的例子：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">TransactionTemplate</span> transactionTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> from<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        transactionTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransactionCallbackWithoutResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doInTransactionWithoutResult</span><span class="token punctuation">(</span><span class="token class-name">TransactionStatus</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    userDao<span class="token punctuation">.</span><span class="token function">reduceMoney</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 扣钱</span>
                    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 模拟异常</span>
                    userDao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加钱</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    status<span class="token punctuation">.</span><span class="token function">setRollbackOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发生异常，回滚事务</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>在这个例子中，我们使用了 <code>TransactionTemplate</code> 来管理事务。当发生异常时，我们调用 <code>status.setRollbackOnly()</code> 方法来回滚事务。</p> <h3 id="模板方法作用"><a href="#模板方法作用" class="header-anchor">#</a> 模板方法作用</h3> <p>在 Spring 框架中，有很多以 <code>Template</code> 结尾的类，例如 <code>JdbcTemplate</code>、<code>RestTemplate</code>、<code>RedisTemplate</code> 等。这些类都是模板类，它们的目的是为了简化开发过程，让开发者能够更快速、更方便地完成特定的任务。</p> <p>模板类通常都遵循模板方法模式，它们定义了一个算法的骨架，将一些步骤的实现延迟到子类中。这样，子类可以在不改变算法结构的情况下，重新定义算法中的某些步骤。</p> <p>例如，在使用 <code>JdbcTemplate</code> 类进行数据库操作时，我们不需要关心如何获取连接、如何处理异常、如何释放资源等细节，只需要关注 SQL 语句和参数即可。<code>JdbcTemplate</code> 类已经为我们封装好了所有的细节操作，我们只需要调用相应的方法即可。</p> <p>下面是一个使用 <code>JdbcTemplate</code> 类进行数据库查询的例子：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM user&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在这个例子中，我们使用了 <code>JdbcTemplate</code> 类的 <code>query</code> 方法来执行查询操作。我们只需要提供 SQL 语句和结果集映射器即可，其他的细节操作都由 <code>JdbcTemplate</code> 类来完成。</p> <p>总之，模板类是为了简化开发过程而设计的。它们封装了一些通用的操作逻辑，让开发者能够更快速、更方便地完成特定的任务。</p> <h3 id="spring-常用注解"><a href="#spring-常用注解" class="header-anchor">#</a> Spring 常用注解</h3> <ul><li>web:
这些注解都是 Spring MVC 框架中用于处理 HTTP 请求的注解。下面是一个简单的示例，演示了这些注解的用法：</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span> <span class="token comment">// 声明这是一个控制器类</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/users&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 映射请求路径</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span> <span class="token comment">// 处理 GET 请求</span>
    <span class="token annotation punctuation">@ResponseBody</span> <span class="token comment">// 将返回值序列化为 JSON</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span> <span class="token comment">// 处理 POST 请求</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从请求体中获取数据</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 处理 PUT 请求，路径中包含变量</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从路径中获取变量</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 处理 DELETE 请求，路径中包含变量</span>
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从路径中获取变量</span>
        userService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>在这个例子中，我们定义了一个 <code>UserController</code> 类，用来处理用户相关的 HTTP 请求。我们使用了 <code>@Controller</code> 注解来声明这是一个控制器类，使用 <code>@RequestMapping</code> 注解来映射请求路径。</p> <p>在类中，我们定义了四个方法，分别用来处理查询、创建、更新和删除用户的请求。我们使用了 <code>@GetMapping</code>、<code>@PostMapping</code>、<code>@PutMapping</code> 和 <code>@DeleteMapping</code> 注解来映射不同类型的 HTTP 请求。</p> <p>在方法的参数中，我们使用了 <code>@RequestBody</code> 注解来从请求体中获取数据，使用了 <code>@PathVariable</code> 注解来从路径中获取变量。</p> <p>在方法的返回值上，我们使用了 <code>@ResponseBody</code> 注解来将返回值序列化为 JSON。</p> <ul><li><p>容器
这些注解都是 Spring 框架中用于依赖注入和配置的注解。下面是对这些注解的简单介绍：</p></li> <li><p><code>@Component</code>：用于标记一个类为 Spring 组件，表示这个类的对象可以由 Spring 容器来管理。它是一个通用的注解，可以用于任何类型的组件。</p></li> <li><p><code>@Service</code>：用于标记一个类为业务逻辑组件，它是 <code>@Component</code> 的一个特殊形式。</p></li> <li><p><code>@Repository</code>：用于标记一个类为数据访问组件，它是 <code>@Component</code> 的一个特殊形式。</p></li> <li><p><code>@Autowired</code>：用于自动装配依赖，可以用在字段、构造函数、方法等地方。它会根据类型自动查找容器中匹配的 bean 进行注入。</p></li> <li><p><code>@Qualifier</code>：用于指定具体要注入的 bean 的名称，通常与 <code>@Autowired</code> 注解一起使用。</p></li> <li><p><code>@Configuration</code>：用于标记一个类为配置类，表示这个类中包含了 bean 的定义信息。</p></li> <li><p><code>@Value</code>：用于将外部配置文件中的值注入到 bean 的属性中。</p></li> <li><p><code>@Bean</code>：用于在配置类中定义一个 bean，表示这个方法返回的对象将被注册到 Spring 容器中。</p></li> <li><p><code>@Scope</code>：用于指定 bean 的作用域，例如单例、原型等。</p></li></ul> <p>下面是一个简单的示例，演示了这些注解的用法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span> <span class="token comment">// 声明这是一个配置类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${app.name}&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 从外部配置文件中获取值</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> appName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span> <span class="token comment">// 定义一个 bean</span>
    <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">&quot;prototype&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 指定 bean 的作用域为原型</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span>appName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span> <span class="token comment">// 声明这是一个业务逻辑组件</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> appName<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token class-name">String</span> appName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>appName <span class="token operator">=</span> appName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">// 自动装配依赖</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;userDaoImpl&quot;</span><span class="token punctuation">)</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 指定要注入的 bean 的名称</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Repository</span> <span class="token comment">// 声明这是一个数据访问组件</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>在这个例子中，我们定义了一个配置类 <code>AppConfig</code>，使用了 <code>@Configuration</code>、<code>@Value</code>、<code>@Bean</code> 和 <code>@Scope</code> 注解。</p> <p>我们还定义了两个组件类 <code>UserServiceImpl</code> 和 <code>UserDaoImpl</code>，分别使用了 <code>@Service</code> 和 <code>@Repository</code> 注解。</p> <p>在 <code>UserServiceImpl</code> 类中，我们使用了 <code>@Autowired</code> 和 <code>@Qualifier</code> 注解来自动装配依赖。</p> <ul><li>AOP: @Aspect、@PointCut、@After@Before@Around</li> <li>事务： @Transactional</li></ul> <h3 id="spring中应用了哪些设计模式"><a href="#spring中应用了哪些设计模式" class="header-anchor">#</a> Spring中应用了哪些设计模式</h3> <h2 id="ioc"><a href="#ioc" class="header-anchor">#</a> IOC</h2> <h3 id="什么是ioc-什么是di"><a href="#什么是ioc-什么是di" class="header-anchor">#</a> 什么是IOC，什么是DI</h3> <p>IOC，叫控制反转，是指把创建对象的控制权从耦合的程序代码中转移到了容器中，而是由容器来管理对象Bean的声明周期。
IOC最主要的实现方式是DI，通过依赖注入的方式，将对象注入到需要它们的对象中，降低代码耦合。</p> <h3 id="di方式"><a href="#di方式" class="header-anchor">#</a> DI方式</h3> <p>在 Spring 框架中，依赖注入有三种方式：构造函数注入、setter 方法注入和字段注入。</p> <ul><li><strong>构造函数注入</strong>：通过构造函数的参数来注入依赖。这种方式可以保证依赖对象在使用前已经被正确初始化。</li> <li><strong>setter 方法注入</strong>：通过 setter 方法来注入依赖。这种方式可以让我们在运行时动态更改依赖对象。</li> <li><strong>字段注入</strong>：直接在字段上注入依赖。这种方式简单方便，但会破坏封装性。</li></ul> <p>下面是一个简单的示例，演示了这三种依赖注入方式的用法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token comment">// 构造函数注入</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// setter 方法注入</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 字段注入</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在这个例子中，我们分别使用了构造函数注入、setter 方法注入和字段注入三种方式来注入 <code>UserDao</code> 对象。我们使用了 <code>@Autowired</code> 注解来标记需要进行自动装配的地方。</p> <p>当然，也可以使用 XML 配置来实现依赖注入。下面是一个简单的示例：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.UserDaoImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 构造函数注入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- setter 方法注入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userDao<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在这个配置文件中，我们使用了 <code>&lt;constructor-arg&gt;</code> 标签来实现构造函数注入，使用了 <code>&lt;property&gt;</code> 标签来实现 setter 方法注入。</p> <p>总之，Spring 框架提供了多种依赖注入方式，可以根据实际情况选择合适的方式进行依赖注入。</p> <h3 id="beanfactory"><a href="#beanfactory" class="header-anchor">#</a> BeanFactory</h3> <p><code>BeanFactory</code> 是 Spring 框架中最基础的容器接口，它定义了 IOC 容器的基本功能和规范。<code>BeanFactory</code> 提供了一种高级的配置机制，能够管理任何类型的对象。</p> <p><code>BeanFactory</code> 提供了一些方法来获取 bean 对象，例如 <code>getBean</code>、<code>containsBean</code>、<code>isSingleton</code> 等。我们可以使用这些方法来从容器中获取 bean 对象，或者查询容器中是否包含某个 bean。</p> <p>下面是一个简单的示例，演示了如何使用 <code>BeanFactory</code> 来获取 bean 对象：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个 Spring 容器</span>
        <span class="token class-name">BeanFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 从容器中获取 bean 对象</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 bean 对象</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在这个例子中，我们创建了一个 <code>ClassPathXmlApplicationContext</code> 类型的 Spring 容器。这个类是 <code>BeanFactory</code> 接口的一个实现类，它能够从类路径下的 XML 配置文件中读取 bean 的定义信息。</p> <p>然后，我们使用 <code>getBean</code> 方法从容器中获取了一个 <code>UserService</code> 类型的 bean 对象。最后，我们调用了这个 bean 对象的 <code>findAll</code> 方法来查询所有用户。</p> <p>总之，<code>BeanFactory</code> 是 Spring 框架中最基础的容器接口。它提供了一些基本的方法来管理和获取 bean 对象。</p> <h3 id="beanfactory-与-factorybean"><a href="#beanfactory-与-factorybean" class="header-anchor">#</a> BeanFactory 与 FactoryBean</h3> <p><code>BeanFactory</code> 和 <code>FactoryBean</code> 是两个不同的接口，它们在 Spring 框架中扮演着不同的角色。</p> <p><code>BeanFactory</code> 是 Spring 框架中最基础的容器接口，它负责管理和创建 bean 对象。当您在 Spring 应用程序中定义一个 bean 时，<code>BeanFactory</code> 会负责根据您的配置创建和初始化该 bean 对象，并将其注入到需要使用它的地方。</p> <p><code>FactoryBean</code> 是一个用于创建复杂对象的工厂 bean 接口。当您需要创建一个复杂的对象，而该对象的创建过程无法通过简单的配置来完成时，您可以使用 <code>FactoryBean</code> 来封装该对象的创建逻辑。<code>FactoryBean</code> 本身也是一个 bean，它需要实现 <code>getObject()</code> 方法来返回它创建的对象。</p> <p>下面是一个简单的使用 <code>FactoryBean</code> 的示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">FactoryBean</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFactoryBean</span> <span class="token keyword">implements</span> <span class="token class-name">FactoryBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyObject</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MyObject</span> <span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在这里实现 MyObject 对象的创建逻辑</span>
        <span class="token class-name">MyObject</span> myObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> myObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">MyObject</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>在上面的代码中，我们定义了一个名为 <code>MyFactoryBean</code> 的 <code>FactoryBean</code>，它负责创建 <code>MyObject</code> 对象。我们在 <code>getObject()</code> 方法中实现了 <code>MyObject</code> 对象的创建逻辑。</p> <p>然后，我们可以在 Spring 配置文件中定义一个 <code>MyFactoryBean</code> 的 bean，例如：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myObject<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.MyFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在，当我们在应用程序中注入 <code>myObject</code> bean 时，Spring 容器会自动调用 <code>MyFactoryBean.getObject()</code> 方法来创建 <code>MyObject</code> 对象。</p> <h3 id="applicantcontext"><a href="#applicantcontext" class="header-anchor">#</a> ApplicantContext</h3> <p><code>ApplicationContext</code> 是 Spring 框架中的一个高级容器接口，它继承了 <code>BeanFactory</code> 接口，并提供了更多的功能和服务。<code>ApplicationContext</code> 是 Spring 框架的核心接口，它代表了 Spring 容器的上下文。</p> <p><code>ApplicationContext</code> 提供了一些额外的方法和特性，例如：</p> <ul><li>国际化支持，能够访问不同语言的消息资源</li> <li>事件发布和监听，能够发布和监听不同类型的事件</li> <li>资源访问，能够访问不同来源的资源文件</li> <li>应用层面的服务，如 AOP、事务管理等</li></ul> <p>下面是一个简单的示例，演示了如何使用 <code>ApplicationContext</code> 来获取 bean 对象：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个 Spring 容器</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 从容器中获取 bean 对象</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 bean 对象</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在这个例子中，我们创建了一个 <code>ClassPathXmlApplicationContext</code> 类型的 Spring 容器。这个类是 <code>ApplicationContext</code> 接口的一个实现类，它能够从类路径下的 XML 配置文件中读取 bean 的定义信息。</p> <p>然后，我们使用 <code>getBean</code> 方法从容器中获取了一个 <code>UserService</code> 类型的 bean 对象。最后，我们调用了这个 bean 对象的 <code>findAll</code> 方法来查询所有用户。</p> <p>总之，<code>ApplicationContext</code> 是 Spring 框架中的一个高级容器接口。它提供了更多的功能和服务，是 Spring 容器的上下文。</p> <h3 id="spring-bean-的生命周期"><a href="#spring-bean-的生命周期" class="header-anchor">#</a> Spring Bean 的生命周期</h3> <ul><li>通过构造函数实例化Bean</li> <li>实例化Bean之后进行一些初始化操作</li> <li>最后执行销毁方法</li></ul> <h3 id="spring-为什么要自动装配啊"><a href="#spring-为什么要自动装配啊" class="header-anchor">#</a> Spring 为什么要自动装配啊</h3> <p>自动装配（autowiring）是 Spring 框架中用于简化依赖注入的一种方式。它能够根据类型或名称自动查找容器中匹配的 bean 进行注入，无需手动指定依赖关系。</p> <p>自动装配能够帮助我们简化配置，减少编码工作量。它能够自动处理依赖关系，让我们只需要关注业务逻辑，而不用担心依赖的细节。</p> <p>下面是一个简单的示例，演示了如何使用自动装配来注入依赖：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">// 自动装配依赖</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在这个例子中，我们使用了 <code>@Autowired</code> 注解来标记需要进行自动装配的字段。当应用程序启动时，Spring 容器会根据类型自动查找容器中匹配的 <code>UserDao</code> bean 进行注入。</p> <p>总之，自动装配是 Spring 框架中用于简化依赖注入的一种方式。它能够帮助我们简化配置，减少编码工作量。</p> <h3 id="单例bean是线程安全的嘛"><a href="#单例bean是线程安全的嘛" class="header-anchor">#</a> 单例Bean是线程安全的嘛</h3> <p>在 Spring 框架中，默认情况下，bean 的作用域是单例（singleton）。这意味着 Spring 容器只会创建一个 bean 实例，并且这个实例会被所有对它的引用所共享。</p> <p>如果一个单例 bean 是线程安全的，那么它在多线程环境下不会出现线程安全问题。但是，如果一个单例 bean 不是线程安全的，那么它在多线程环境下可能会出现线程安全问题。</p> <p>例如，如果一个单例 bean 中包含了可变的状态（例如非 final 的字段），并且这些状态没有被正确地同步，那么这个 bean 在多线程环境下可能会出现线程安全问题。</p> <p>为了避免这种情况，我们应该尽量避免在单例 bean 中包含可变的状态。如果必须包含可变的状态，那么应该使用同步机制来保证线程安全。</p> <p>总之，单例 bean 本身不会导致线程安全问题。但是，如果一个单例 bean 不是线程安全的，那么它在多线程环境下可能会出现线程安全问题。因此，我们应该注意保证单例 bean 的线程安全性。</p> <h3 id="解决线程安全问题"><a href="#解决线程安全问题" class="header-anchor">#</a> 解决线程安全问题</h3> <p>如果一个单例 bean 不是线程安全的，那么可以采取以下几种方式来解决线程安全问题：</p> <ol><li><p><strong>避免使用可变状态</strong>：尽量避免在单例 bean 中包含可变的状态。如果可以，尽量使用不可变对象来代替可变对象。</p></li> <li><p><strong>使用同步机制</strong>：如果必须包含可变的状态，那么应该使用同步机制来保证线程安全。例如，可以使用 <code>synchronized</code> 关键字或 <code>Lock</code> 接口来实现同步。</p></li> <li><p><strong>使用 ThreadLocal</strong>：如果每个线程都需要一个独立的状态，那么可以使用 <code>ThreadLocal</code> 来为每个线程提供一个独立的副本。</p></li> <li><p><strong>更改 bean 的作用域</strong>：如果单例作用域不适用于当前的情况，那么可以考虑更改 bean 的作用域。例如，可以将 bean 的作用域更改为原型（prototype），这样每次获取 bean 时都会创建一个新的实例。</p></li></ol> <h3 id="为什么会出现循环依赖问题"><a href="#为什么会出现循环依赖问题" class="header-anchor">#</a> 为什么会出现循环依赖问题</h3> <p>循环依赖（circular dependency）是指两个或多个 bean 之间相互依赖，形成了一个循环。例如，如果 bean A 依赖于 bean B，而 bean B 又依赖于 bean A，那么就形成了一个循环依赖。</p> <p>循环依赖会导致 Spring 容器无法正确初始化这些 bean。当 Spring 容器尝试创建这些 bean 时，会发现它们之间存在循环依赖，无法确定它们的创建顺序。因此，Spring 容器会抛出一个 <code>BeanCurrentlyInCreationException</code> 异常，表示无法创建这些 bean。</p> <p>下面是一个简单的示例，演示了如何产生循环依赖：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在这个例子中，<code>UserServiceImpl</code> 类依赖于 <code>OrderService</code> 类，而 <code>OrderServiceImpl</code> 类又依赖于 <code>UserService</code> 类。这就形成了一个循环依赖。</p> <p>当 Spring 容器尝试创建这两个 bean 时，会发现它们之间存在循环依赖，无法确定它们的创建顺序。因此，Spring 容器会抛出一个 <code>BeanCurrentlyInCreationException</code> 异常。</p> <p>总之，循环依赖是指两个或多个 bean 之间相互依赖，形成了一个循环。循环依赖会导致 Spring 容器无法正确初始化这些 bean。因此，我们应该避免在代码中产生循环依赖。</p> <h3 id="怎么解决循环依赖问题"><a href="#怎么解决循环依赖问题" class="header-anchor">#</a> 怎么解决循环依赖问题</h3> <p>Spring 框架能够解决部分循环依赖的问题。具体来说，Spring 容器能够解决单例 bean 之间的循环依赖，但是无法解决原型 bean 之间的循环依赖。</p> <p>当 Spring 容器检测到单例 bean 之间存在循环依赖时，它会使用以下算法来解决这个问题：</p> <ol><li>当 Spring 容器创建一个单例 bean 时，它会首先将这个 bean 标记为“当前正在创建”。</li> <li>然后，Spring 容器会尝试解析这个 bean 的依赖关系。如果发现这个 bean 依赖于另一个“当前正在创建”的 bean，那么就说明存在循环依赖。</li> <li>此时，Spring 容器会尝试使用已经创建好的部分实例来解决循环依赖。具体来说，它会将已经创建好的部分实例注入到其他 bean 中，从而打破循环依赖。</li></ol> <p>下面是一个简单的示例，演示了 Spring 容器是如何解决循环依赖的：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Creating UserServiceImpl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Creating OrderServiceImpl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 省略其他代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>在这个例子中，<code>UserServiceImpl</code> 类依赖于 <code>OrderService</code> 类，而 <code>OrderServiceImpl</code> 类又依赖于 <code>UserService</code> 类。这就形成了一个循环依赖。</p> <p>当 Spring 容器尝试创建这两个 bean 时，它会按照以下步骤进行：</p> <ol><li>Spring 容器开始创建 <code>UserServiceImpl</code> 类的实例。此时，它会将这个实例标记为“当前正在创建”，并输出“Creating UserServiceImpl”。</li> <li>然后，Spring 容器尝试解析 <code>UserServiceImpl</code> 类的依赖关系。它发现这个类依赖于 <code>OrderService</code> 类，于是开始创建 <code>OrderServiceImpl</code> 类的实例。</li> <li>当 Spring 容器开始创建 <code>OrderServiceImpl</code> 类的实例时，它会将这个实例标记为“当前正在创建”，并输出“Creating OrderServiceImpl”。</li> <li>然后，Spring 容器尝试解析 <code>OrderServiceImpl</code> 类的依赖关系。它发现这个类依赖于 <code>UserService</code> 类，但是 <code>UserService</code> 类的实例已经标记为“当前正在创建”，说明存在循环依赖。</li> <li>此时，Spring 容器会使用已经创建好的 <code>UserServiceImpl</code> 类的部分实例来注入到 <code>OrderServiceImpl</code> 类中，从而打破循环依赖。</li></ol> <p>总之，Spring 框架能够解决部分循环依赖的问题。具体来说，Spring 容器能够解决单例 bean 之间的循环依赖，但是无法解决原型 bean 之间的循环依赖。</p> <h2 id="aop"><a href="#aop" class="header-anchor">#</a> AOP</h2> <h3 id="什么是aop-应用场景"><a href="#什么是aop-应用场景" class="header-anchor">#</a> 什么是AOP，应用场景</h3> <p>AOP（面向切面编程）是一种编程范式，它旨在将横切关注点（cross-cutting concerns）与业务逻辑分离，以提高代码的模块化和可维护性。</p> <p>横切关注点是指那些与业务逻辑无关，但在多个模块或功能中都需要使用的功能，如日志记录、事务管理、安全检查等。在传统的编程范式中，这些功能通常会直接嵌入到业务逻辑中，导致代码重复和耦合度高，难以维护和扩展。</p> <p>AOP通过引入切面（Aspect）的概念，将横切关注点与业务逻辑分离。切面是一种特殊的模块，它定义了横切关注点的实现，并通过切入点（Pointcut）和通知（Advice）来指定横切关注点应该在何时何地被织入（weave）到业务逻辑中。这样可以将横切关注点的实现与业务逻辑分离，提高代码的模块化和可维护性。</p> <p>例如，在一个Web应用程序中，我们可能需要在每个控制器方法执行之前和之后记录日志。使用AOP，我们可以定义一个日志切面，指定切入点为所有控制器方法，通知为在方法执行之前和之后记录日志。这样就可以将日志记录的实现与控制器方法的业务逻辑分离，避免在每个控制器方法中都添加重复的日志记录代码。
已发送电子邮件. AOP的应用场景
AOP（面向切面编程）可以应用于许多场景，主要用于解决横切关注点（cross-cutting concerns）问题。下面是一些常见的AOP应用场景：</p> <p>日志记录：可以使用AOP来记录应用程序的运行日志，如方法调用日志、异常日志等。这样可以将日志记录的实现与业务逻辑分离，避免在每个方法中都添加重复的日志记录代码。</p> <p>性能监控：可以使用AOP来监控应用程序的性能，如方法执行时间、内存占用等。这样可以将性能监控的实现与业务逻辑分离，避免在每个方法中都添加重复的性能监控代码。</p> <p>事务管理：可以使用AOP来管理数据库事务，如开启事务、提交事务、回滚事务等。这样可以将事务管理的实现与业务逻辑分离，避免在每个方法中都添加重复的事务管理代码。</p> <p>安全检查：可以使用AOP来检查用户的权限和身份，如登录检查、权限检查等。这样可以将安全检查的实现与业务逻辑分离，避免在每个方法中都添加重复的安全检查代码。</p> <p>异常处理：可以使用AOP来统一处理应用程序中的异常，如记录异常日志、发送异常通知等。这样可以将异常处理的实现与业务逻辑分离，避免在每个方法中都添加重复的异常处理代码。</p> <h3 id="jdk动态代理-和-cglib动态代理"><a href="#jdk动态代理-和-cglib动态代理" class="header-anchor">#</a> JDK动态代理 和 CGlib动态代理</h3> <p>JDK动态代理是Java提供的一种代理实现方式，它允许开发人员在运行时动态地创建代理对象。下面是一个简单的例子，它演示了如何使用JDK动态代理来创建一个代理对象：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">implements</span> <span class="token class-name">MyInterface</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyClass doing something&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyInvocationHandler</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before method call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After method call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyClass</span> myClass <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MyInvocationHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyInvocationHandler</span><span class="token punctuation">(</span>myClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MyInterface</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyInterface</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
                <span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">MyInterface</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>在上面的例子中，我们定义了一个接口<code>MyInterface</code>和一个实现类<code>MyClass</code>。我们还定义了一个调用处理器类<code>MyInvocationHandler</code>，它实现了<code>InvocationHandler</code>接口。在调用处理器的<code>invoke</code>方法中，我们在调用目标方法之前和之后分别打印了一条信息。</p> <p>在主方法中，我们首先创建了一个<code>MyClass</code>实例和一个<code>MyInvocationHandler</code>实例。然后，我们使用<code>Proxy.newProxyInstance</code>方法创建了一个代理对象。这个方法接收三个参数：类加载器、接口数组和调用处理器。最后，我们调用了代理对象的<code>doSomething</code>方法。</p> <p>当我们运行上面的代码时，会看到如下输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Before method call
MyClass doing something
After method call
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>从输出中可以看出，在调用目标方法之前和之后，调用处理器的<code>invoke</code>方法都被执行了。这就是JDK动态代理的基本用法。</p> <p>CGLib动态代理是一种代理实现方式，它允许开发人员在运行时动态地创建代理对象。与JDK动态代理不同，CGLib动态代理不要求目标对象实现接口。下面是一个简单的例子，它演示了如何使用CGLib动态代理来创建一个代理对象：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">Enhancer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">MethodInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span></span><span class="token class-name">MethodProxy</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;MyClass doing something&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyMethodInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> proxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before method call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;After method call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyMethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MyClass</span> myClass <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        myClass<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>在上面的例子中，我们定义了一个类<code>MyClass</code>，它包含一个方法<code>doSomething</code>。我们还定义了一个方法拦截器类<code>MyMethodInterceptor</code>，它实现了<code>MethodInterceptor</code>接口。在方法拦截器的<code>intercept</code>方法中，我们在调用目标方法之前和之后分别打印了一条信息。</p> <p>在主方法中，我们首先创建了一个<code>Enhancer</code>实例。然后，我们使用<code>setSuperclass</code>方法设置了目标类，并使用<code>setCallback</code>方法设置了方法拦截器。最后，我们使用<code>create</code>方法创建了一个代理对象，并调用了它的<code>doSomething</code>方法。</p> <p>当我们运行上面的代码时，会看到如下输出：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Before method call
MyClass doing something
After method call
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>从输出中可以看出，在调用目标方法之前和之后，方法拦截器的<code>intercept</code>方法都被执行了。这就是CGLib动态代理的基本用法。</p> <h3 id="spring-aop-和-aspectj-aop之间的区别"><a href="#spring-aop-和-aspectj-aop之间的区别" class="header-anchor">#</a> Spring AOP 和 AspectJ AOP之间的区别</h3> <p>Spring AOP和AspectJ AOP都是实现AOP（面向切面编程）的框架，它们都提供了丰富的注解和API来定义切面（Aspect）、切入点（Pointcut）和通知（Advice）。但它们之间也有一些区别，主要体现在以下几个方面：</p> <ul><li><p><strong>实现方式</strong>：Spring AOP是基于代理（Proxy）实现的，它在运行时动态生成目标对象的代理对象，然后在代理对象中织入切面逻辑。而AspectJ AOP是基于字节码操作（Bytecode Manipulation）实现的，它在编译时或加载时对目标类的字节码进行修改，直接在目标类中织入切面逻辑。</p></li> <li><p><strong>功能范围</strong>：由于Spring AOP是基于代理实现的，所以它只能对Spring容器管理的Bean进行增强，无法对非Spring容器管理的对象进行增强。而AspectJ AOP由于是基于字节码操作实现的，所以它可以对任何对象进行增强，不受Spring容器的限制。</p></li> <li><p><strong>性能开销</strong>：Spring AOP由于是在运行时动态生成代理对象，所以它会带来一定的性能开销。而AspectJ AOP由于是在编译时或加载时对字节码进行修改，所以它对运行时性能的影响较小。</p></li></ul> <p>下面是一个简单的例子，演示如何使用Spring AOP和AspectJ AOP来定义一个日志切面：</p> <p>使用Spring AOP：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.example.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before method: &quot;</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用AspectJ AOP：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.example.service.*.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Before method: &quot;</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>从上面的例子可以看出，使用Spring AOP和AspectJ AOP定义切面的语法基本相同，都是通过<code>@Aspect</code>注解来定义切面类，然后使用<code>@Before</code>、<code>@After</code>、<code>@Around</code>等注解来定义通知方法。不同之处在于，使用Spring AOP时需要将切面类声明为Spring容器管理的Bean（如使用<code>@Component</code>注解），而使用AspectJ AOP时则不需要。</p> <h3 id="什么是编译时、加载时、运行时"><a href="#什么是编译时、加载时、运行时" class="header-anchor">#</a> 什么是编译时、加载时、运行时</h3> <p>编译时、加载时和运行时是指Java程序从源代码到运行的三个阶段：</p> <ul><li><p><strong>编译时</strong>：编译时是指将Java源代码编译成字节码的过程。在这个阶段，Java编译器（javac）会对源代码进行语法检查、类型检查等，然后将源代码翻译成字节码文件（.class文件）。</p></li> <li><p><strong>加载时</strong>：加载时是指将字节码文件加载到JVM中的过程。在这个阶段，JVM会通过类加载器（ClassLoader）来加载字节码文件，然后对字节码进行验证、准备和解析等操作。</p></li> <li><p><strong>运行时</strong>：运行时是指JVM执行字节码的过程。在这个阶段，JVM会通过解释器（Interpreter）或即时编译器（JIT Compiler）来执行字节码，完成程序的运行。</p></li></ul> <p>下面是一个简单的例子，演示Java程序从源代码到运行的过程：</p> <p>假设有一个名为<code>HelloWorld.java</code>的Java源文件，内容如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>首先，在编译时阶段，我们可以使用<code>javac</code>命令来编译这个源文件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>javac HelloWorld.java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>经过编译后，会生成一个名为<code>HelloWorld.class</code>的字节码文件。</p> <p>然后，在加载时阶段，当我们使用<code>java</code>命令来运行这个程序时，JVM会通过类加载器来加载<code>HelloWorld.class</code>文件，并对其进行验证、准备和解析等操作。</p> <p>最后，在运行时阶段，JVM会通过解释器或即时编译器来执行<code>HelloWorld.class</code>文件中的字节码，完成程序的运行。最终在控制台输出<code>Hello, World!</code>。</p> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <h3 id="spring事务种类"><a href="#spring事务种类" class="header-anchor">#</a> Spring事务种类</h3> <h3 id="spring事务的隔离级别"><a href="#spring事务的隔离级别" class="header-anchor">#</a> Spring事务的隔离级别</h3> <h3 id="spring事务传播机制是干嘛的"><a href="#spring事务传播机制是干嘛的" class="header-anchor">#</a> Spring事务传播机制是干嘛的</h3> <p>在Spring中，事务的传播机制（Transaction Propagation）是指在多个事务方法嵌套调用时，如何管理事务的行为。Spring提供了7种事务传播行为，可以通过在<code>@Transactional</code>注解中指定<code>propagation</code>属性来设置。</p> <p>下面是7种事务传播行为的说明：</p> <ul><li><p><strong>PROPAGATION_REQUIRED</strong>：如果当前没有事务，就新建一个事务；如果当前存在事务，就加入到当前事务中。这是默认的传播行为。</p></li> <li><p><strong>PROPAGATION_SUPPORTS</strong>：如果当前存在事务，就加入到当前事务中；如果当前没有事务，就以非事务方式执行。</p></li> <li><p><strong>PROPAGATION_MANDATORY</strong>：如果当前存在事务，就加入到当前事务中；如果当前没有事务，就抛出异常。</p></li> <li><p><strong>PROPAGATION_REQUIRES_NEW</strong>：新建一个事务，并暂停当前的事务（如果存在）。</p></li> <li><p><strong>PROPAGATION_NOT_SUPPORTED</strong>：以非事务方式执行，并暂停当前的事务（如果存在）。</p></li> <li><p><strong>PROPAGATION_NEVER</strong>：以非事务方式执行，如果当前存在事务，就抛出异常。</p></li> <li><p><strong>PROPAGATION_NESTED</strong>：如果当前存在事务，则在嵌套事务内执行；如果当前没有事务，则新建一个事务。嵌套事务是指在一个大的外围事务中，可以有多个小的嵌套事务。外围事务提交时，所有嵌套事务也会提交；外围事务回滚时，所有嵌套事务也会回滚。但嵌套事务回滚时，不会影响外围事务。</p></li></ul> <p>下面是一个简单的例子，演示如何使用不同的传播行为：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span><span class="token constant">REQUIRED</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something</span>
        <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span><span class="token constant">REQUIRES_NEW</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在上面的例子中，<code>methodA</code>和<code>methodB</code>都被声明为<code>@Transactional</code>方法。当调用<code>methodA</code>时，会新建一个事务；当调用<code>methodB</code>时，由于它的传播行为被设置为<code>Propagation.REQUIRES_NEW</code>，所以会新建一个新的事务，并暂停<code>methodA</code>中的事务。当<code>methodB</code>执行完毕后，会提交新建的事务，并恢复<code>methodA</code>中的事务。</p> <h2 id="mvc"><a href="#mvc" class="header-anchor">#</a> MVC</h2> <h3 id="spring-mvc的核心组件以及工作流程"><a href="#spring-mvc的核心组件以及工作流程" class="header-anchor">#</a> Spring MVC的核心组件以及工作流程</h3> <p>对Spring MVC的理解：
一个客户端请求来了之后的调用逻辑，是调用Controller层对应的方法，然后Controller层调用Service，Service调用DAO层，最后将处理完成的数据封装在Model中，把model数据给视图层渲染处理，将最终结果返回给浏览器，进行解析展示。</p> <ol><li>浏览器发送请求到DispacherServlet(前端控制器)</li> <li>前端控制器将请求发给HandlerMapping(处理器映射器)查找Handler</li> <li>处理器映射器返回一个执行链</li> <li>DS请求处理器适配器执行Handler</li> <li>处理器适配器找到对应Handler执行器，将执行后的结果ModelAndView返回给DS</li> <li>DS通过视图解析器进行 进行视图解析</li> <li>然后将视图进行渲染</li> <li>将渲染后的结果返回给浏览器进行解析展示</li></ol> <h2 id="mybatis"><a href="#mybatis" class="header-anchor">#</a> MyBatis</h2> <p>核心组件：</p> <ul><li>SqlSessionFactory:用于创建SqlSession的工厂类</li> <li>SqlSession用于向数据库执行SQL</li> <li>Mapper接口：就是DAO接口，在Mabatis中习惯称之为Mapper</li> <li>Mapper映射器：通过用于编写SQL，采用XML、注解方式实现</li></ul> <h3 id="与-之间的区别"><a href="#与-之间的区别" class="header-anchor">#</a> #{} 与 ${}之间的区别</h3> <p>#{} 与 ${}都是取变量值的</p> <ul><li>#{}取出来的变量的value值会加上&quot;&quot;,${}取出来的value值不会加&quot;&quot;</li> <li>#{}可以防止SQL注入，${}不可以防止SQL注入</li></ul> <h3 id="日志级别"><a href="#日志级别" class="header-anchor">#</a> 日志级别</h3> <p>OFF: 关闭所有日志记录
FATAL：打印非常严重的可能导致应用终止的错误事件
ERROR：打印错误事件
WARN：可能的潜在危险事件
INFO：粗粒度描述应用运行过程
DEBUG：细粒度描述应用运行过程
Trace：更加细粒度描述应用运行过程
ALL：打印全部日志</p> <h2 id="springboot"><a href="#springboot" class="header-anchor">#</a> SpringBoot</h2> <h3 id="为什么还会出现spring-boot"><a href="#为什么还会出现spring-boot" class="header-anchor">#</a> 为什么还会出现Spring Boot</h3> <p>Spring Boot是基于Spring框架开发的一种新技术，它旨在简化Spring应用程序的创建和开发过程。虽然Spring框架功能强大，但它的配置和使用也相对复杂，需要开发人员具备较高的技能水平。Spring Boot通过提供一系列的自动配置、启动器和命令行工具，来简化Spring应用程序的创建和开发过程。</p> <p>下面是Spring Boot相对于Spring框架的一些优点：</p> <ul><li><p><strong>简化配置</strong>：Spring Boot提供了大量的自动配置，可以根据项目的依赖关系自动配置常用的组件，如数据源、JPA、Web MVC等。这样可以减少开发人员需要编写的配置代码，简化开发过程。</p></li> <li><p><strong>快速开发</strong>：Spring Boot提供了大量的启动器（Starter），可以快速集成常用的组件和框架，如JDBC、MongoDB、Redis等。这样可以减少开发人员需要编写的集成代码，提高开发效率。</p></li> <li><p><strong>灵活部署</strong>：Spring Boot支持多种部署方式，可以将应用程序打包成可执行的JAR或WAR文件，也可以直接在命令行中运行。这样可以灵活地部署应用程序，满足不同的部署需求。</p></li> <li><p><strong>监控运维</strong>：Spring Boot提供了丰富的监控和运维功能，可以方便地监控应用程序的运行状态、性能指标和日志信息。这样可以帮助运维人员快速定位问题，提高运维效率。</p></li></ul> <p>总之，Spring Boot是基于Spring框架开发的一种新技术，它通过提供一系列简化配置和快速开发的功能，来简化Spring应用程序的创建和开发过程。</p> <h3 id="spring-boot自动装配原理"><a href="#spring-boot自动装配原理" class="header-anchor">#</a> Spring Boot自动装配原理</h3> <p>在Spring Boot中，自动配置（Auto-configuration）是指根据项目的依赖关系和配置信息，自动配置常用的组件和框架。自动配置是通过<code>@EnableAutoConfiguration</code>注解来启用的，它会扫描项目的类路径，查找所有可用的自动配置类，并根据条件进行匹配和配置。</p> <p>自动配置类通常以<code>AutoConfiguration</code>结尾，如<code>DataSourceAutoConfiguration</code>、<code>JpaAutoConfiguration</code>等。它们都位于<code>org.springframework.boot.autoconfigure</code>包下，可以通过查看源代码来了解它们的实现细节。</p> <p>自动配置类通常使用<code>@ConditionalOnXXX</code>注解来定义条件，如<code>@ConditionalOnClass</code>、<code>@ConditionalOnBean</code>、<code>@ConditionalOnProperty</code>等。只有当条件满足时，才会执行自动配置。</p> <p>下面是一个简单的例子，演示如何使用自动配置来配置数据源：</p> <p>假设我们在项目中添加了<code>spring-boot-starter-jdbc</code>依赖，那么Spring Boot会自动检测到这个依赖，并尝试进行数据源的自动配置。</p> <p>首先，Spring Boot会查找所有可用的自动配置类，并找到<code>DataSourceAutoConfiguration</code>类。然后，它会检查这个类上的条件是否满足。由于我们添加了JDBC依赖，所以条件满足。</p> <p>接下来，Spring Boot会执行这个类中定义的自动配置逻辑。它会根据我们在配置文件中指定的数据源类型、驱动程序、URL、用户名和密码等信息，来创建一个数据源对象，并将其注册到Spring容器中。</p> <p>最后，我们就可以在应用程序中直接使用这个数据源对象了，无需手动进行配置。</p> <h3 id="spring-boot-启动原理"><a href="#spring-boot-启动原理" class="header-anchor">#</a> Spring Boot 启动原理</h3> <p>Spring Boot应用程序的启动过程包括以下几个步骤：</p> <ol><li>创建一个<code>SpringApplication</code>对象实例，该对象负责管理应用程序的启动过程。</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SpringApplication</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>调用<code>SpringApplication</code>对象的<code>run</code>方法来启动应用程序。该方法会执行以下操作：</li></ol> <ul><li>加载应用程序上下文（Application Context）。</li> <li>注册命令行属性（Command Line Properties）。</li> <li>加载外部配置文件（External Configuration）。</li> <li>加载应用程序参数（Application Arguments）。</li> <li>初始化日志系统（Logging System）。</li> <li>初始化应用程序事件监听器（Application Event Listeners）。</li> <li>准备环境（Environment）。</li> <li>打印Banner信息（Banner）。</li> <li>创建并刷新应用程序上下文（Application Context）。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>app<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>应用程序上下文创建完成后，Spring Boot会自动执行以下操作：</li></ol> <ul><li>执行所有<code>CommandLineRunner</code>和<code>ApplicationRunner</code>接口的实现类。</li> <li>发布<code>ApplicationReadyEvent</code>事件。</li></ul> <p>下面是一个简单的例子，演示如何启动一个Spring Boot应用程序：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在上面的例子中，我们使用了<code>@SpringBootApplication</code>注解来标记这是一个Spring Boot应用程序。然后在<code>main</code>方法中，调用了<code>SpringApplication.run</code>方法来启动应用程序。</p> <h2 id="springcloud"><a href="#springcloud" class="header-anchor">#</a> SpringCloud</h2> <h3 id="为什么会出现spring-cloud呢"><a href="#为什么会出现spring-cloud呢" class="header-anchor">#</a> 为什么会出现Spring Cloud呢</h3> <p>随着互联网技术的快速发展，越来越多的企业开始采用微服务架构来构建大型分布式系统。微服务架构通过将系统拆分为多个独立的服务，实现了系统的高内聚、低耦合和可扩展性。但同时，微服务架构也带来了一些新的挑战，如服务治理、配置管理、服务发现等。</p> <p>Spring Cloud应运而生，它是一套基于Spring Boot开发的微服务架构解决方案。它提供了一系列工具和组件，可以帮助开发人员快速构建分布式系统，并解决微服务架构中的一些常见问题。</p> <p>Spring Cloud提供了以下功能：</p> <ul><li><p><strong>服务发现</strong>：Spring Cloud提供了多种服务发现组件，如Eureka、Consul、Zookeeper等。这些组件可以帮助服务之间相互发现和调用。</p></li> <li><p><strong>配置管理</strong>：Spring Cloud提供了配置中心组件，如Spring Cloud Config。它可以帮助开发人员统一管理分布式系统中的配置信息。</p></li> <li><p><strong>负载均衡</strong>：Spring Cloud提供了客户端负载均衡组件，如Ribbon。它可以帮助开发人员实现客户端负载均衡，提高系统的可用性。</p></li> <li><p><strong>断路器</strong>：Spring Cloud提供了断路器组件，如Hystrix。它可以帮助开发人员实现服务降级和熔断，提高系统的容错能力。</p></li> <li><p><strong>API网关</strong>：Spring Cloud提供了API网关组件，如Zuul。它可以帮助开发人员实现API路由、过滤和安全校验等功能。</p></li></ul> <p>总之，Spring Cloud是一套基于Spring Boot开发的微服务架构解决方案。它通过提供一系列工具和组件，来帮助开发人员快速构建分布式系统，并解决微服务架构中的一些常见问题。</p> <h3 id="有哪些微服务的框架"><a href="#有哪些微服务的框架" class="header-anchor">#</a> 有哪些微服务的框架</h3> <p>您提到的三种微服务框架都是目前比较流行的解决方案，它们各有优势：</p> <ul><li><p><strong>Spring Cloud Netflix</strong>：Spring Cloud Netflix是Spring Cloud体系中基于Netflix开源组件实现的一套微服务框架。它提供了丰富的组件，如Eureka（服务发现）、Ribbon（客户端负载均衡）、Hystrix（断路器）、Zuul（API网关）等。这些组件都经过了Netflix公司大规模生产环境的验证，具有很高的可靠性和稳定性。</p></li> <li><p><strong>Spring Cloud Alibaba</strong>：Spring Cloud Alibaba是阿里巴巴开源的一套微服务框架，它基于Spring Cloud体系，提供了丰富的组件，如Nacos（服务发现和配置管理）、Sentinel（流量控制和熔断）、RocketMQ（消息中间件）等。这些组件都经过了阿里巴巴大规模生产环境的验证，具有很高的可靠性和稳定性。</p></li> <li><p><strong>Spring Boot + Dubbo + ZooKeeper</strong>：这种方案结合了Spring Boot、Dubbo和ZooKeeper三个优秀的开源项目。Spring Boot提供了快速开发和简化配置的能力；Dubbo提供了高性能的RPC通信和丰富的服务治理功能；ZooKeeper提供了分布式协调和配置管理能力。这种方案可以满足大多数微服务架构的需求，具有很高的灵活性和可扩展性。</p></li></ul> <h3 id="spring-cloud-netflix有哪些微服务组件"><a href="#spring-cloud-netflix有哪些微服务组件" class="header-anchor">#</a> Spring Cloud Netflix有哪些微服务组件</h3> <p>Spring Cloud Netflix是Spring Cloud体系中基于Netflix开源组件实现的一套微服务框架。它提供了丰富的组件，可以帮助开发人员快速构建分布式系统，并解决微服务架构中的一些常见问题。下面是Spring Cloud Netflix中常用的一些微服务组件：</p> <ul><li><p><strong>Eureka</strong>：Eureka是一个服务发现组件，它提供了服务注册和发现的功能。服务提供者可以将自己注册到Eureka服务器上，服务消费者可以从Eureka服务器上查询可用的服务列表。</p></li> <li><p><strong>Ribbon</strong>：Ribbon是一个客户端负载均衡组件，它提供了多种负载均衡策略，可以帮助服务消费者在多个可用的服务提供者之间进行负载均衡。</p></li> <li><p><strong>Hystrix</strong>：Hystrix是一个断路器组件，它提供了服务降级和熔断的功能。当某个服务出现故障时，Hystrix可以自动进行服务降级或熔断，避免故障扩散。</p></li> <li><p><strong>Zuul</strong>：Zuul是一个API网关组件，它提供了API路由、过滤和安全校验等功能。Zuul可以作为系统的统一入口，对外提供API服务。</p></li> <li><p><strong>Feign</strong>：Feign是一个声明式的HTTP客户端，它提供了一种简单的方式来调用远程HTTP接口。Feign支持多种注解风格，如JAX-RS、Spring MVC等。</p></li></ul> <p>以上是Spring Cloud Netflix中常用的一些微服务组件，它们都经过了Netflix公司大规模生产环境的验证，具有很高的可靠性和稳定性。希望这些信息能够帮助您了解Spring Cloud Netflix中常用的微服务组件。</p> <h3 id="spring-cloud-alibaba中有哪些微服务的组件"><a href="#spring-cloud-alibaba中有哪些微服务的组件" class="header-anchor">#</a> Spring Cloud Alibaba中有哪些微服务的组件</h3> <p>Spring Cloud Alibaba是阿里巴巴开源的一套微服务框架，它基于Spring Cloud体系，提供了丰富的组件，可以帮助开发人员快速构建分布式系统，并解决微服务架构中的一些常见问题。下面是Spring Cloud Alibaba中常用的一些微服务组件：</p> <ul><li><p><strong>Nacos</strong>：Nacos是一个服务发现和配置管理组件，它提供了服务注册、发现和配置管理的功能。服务提供者可以将自己注册到Nacos服务器上，服务消费者可以从Nacos服务器上查询可用的服务列表。此外，Nacos还提供了配置管理功能，可以帮助开发人员统一管理分布式系统中的配置信息。</p></li> <li><p><strong>Sentinel</strong>：Sentinel是一个流量控制和熔断组件，它提供了流量控制、熔断降级和系统自适应保护等功能。Sentinel可以帮助开发人员实现对微服务架构中的流量进行控制和保护。</p></li> <li><p><strong>RocketMQ</strong>：RocketMQ是一个消息中间件，它提供了高性能、高可靠性和高可扩展性的消息传递能力。RocketMQ支持多种消息模型，如发布/订阅、点对点等。</p></li> <li><p><strong>Dubbo</strong>：Dubbo是阿里巴巴开源的一款高性能的Java RPC框架。它提供了丰富的服务治理功能，如服务发现、负载均衡、容错等。Dubbo支持多种协议和注册中心，可以满足不同场景下的需求。</p></li> <li><p><strong>Seata</strong>：Seata是一个分布式事务解决方案，它提供了AT、TCC、SAGA和XA四种分布式事务模式。Seata可以帮助开发人员解决微服务架构中分布式事务的问题。</p></li></ul> <p>以上是Spring Cloud Alibaba中常用的一些微服务组件，它们都经过了阿里巴巴大规模生产环境的验证，具有很高的可靠性和稳定性。希望这些信息能够帮助您了解Spring Cloud Alibaba中常用的微服务组件。</p> <h3 id="微服务组件"><a href="#微服务组件" class="header-anchor">#</a> 微服务组件</h3> <h4 id="eureka的基本使用"><a href="#eureka的基本使用" class="header-anchor">#</a> Eureka的基本使用</h4> <p>首先，您需要在您的项目中添加 Eureka Server 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableEurekaServer</code> 注解来启用 Eureka 服务端功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaServer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaServerApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaServerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您需要在您的配置文件中添加一些 Eureka Server 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8761</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>现在，您可以运行您的应用程序来启动 Eureka 服务端。</p> <p>接下来，我们来看一个简单的 Eureka 客户端示例。</p> <p>首先，您需要在您的项目中添加 Eureka Client 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableEurekaClient</code> 注解来启用 Eureka 客户端功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaClientApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaClientApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您需要在您的配置文件中添加一些 Eureka Client 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>现在，您可以运行您的应用程序来启动 Eureka 客户端。它将自动向 Eureka 服务端注册，并从中获取服务列表。</p> <h4 id="nacos的使用"><a href="#nacos的使用" class="header-anchor">#</a> Nacos的使用</h4> <p>首先，您需要在您的项目中添加 Nacos 客户端的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableDiscoveryClient</code> 注解来启用服务发现功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosClientApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">NacosClientApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您需要在您的配置文件中添加一些 Nacos 客户端的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>现在，您可以运行您的应用程序来启动 Nacos 客户端。它将自动向 Nacos 服务端注册，并从中获取服务列表。</p> <p>Nacos 服务端的安装和运行与 Eureka 服务端有所不同。Nacos 服务端是一个独立的应用程序，您需要从 Nacos 的官方网站下载并安装它。</p> <p>首先，您需要从 Nacos 的 GitHub 发布页面下载最新版本的 Nacos 服务端。</p> <p>然后，您需要解压下载的文件，并进入解压后的目录。</p> <p>接下来，您可以运行以下命令来启动 Nacos 服务端：</p> <p>sh startup.sh -m standalone
复制
这将以单机模式启动 Nacos 服务端。在生产环境中，您可能需要使用集群模式来运行 Nacos 服务端以获得更好的可靠性和可扩展性。</p> <p>现在，您可以访问 http://localhost:8848/nacos 来访问 Nacos 控制台。默认用户名和密码都是 nacos。</p> <h4 id="ribbon的基本使用"><a href="#ribbon的基本使用" class="header-anchor">#</a> Ribbon的基本使用</h4> <p>Ribbon 是一个客户端负载均衡器，它可以与 Eureka 或其他服务发现组件一起使用，以在客户端实现负载均衡。</p> <p>下面是一个简单的使用 Ribbon 的示例。</p> <p>首先，您需要在您的项目中添加 Ribbon 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-ribbon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，您需要创建一个 <code>RestTemplate</code> bean，并使用 <code>@LoadBalanced</code> 注解来启用负载均衡功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">LoadBalanced</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RibbonConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>现在，您可以在您的应用程序中使用 <code>RestTemplate</code> 来发起 HTTP 请求。Ribbon 将自动为您选择一个可用的服务实例，并将请求路由到该实例。</p> <p>例如，假设您有一个名为 <code>my-service</code> 的服务，您可以使用以下代码来调用该服务的 <code>/hello</code> 接口：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://my-service/hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="hytrix的使用"><a href="#hytrix的使用" class="header-anchor">#</a> Hytrix的使用</h4> <p>Hystrix 是一个断路器组件，它可以帮助您的应用程序在依赖的服务出现故障时保持可用。</p> <p>下面是一个简单的使用 Hystrix 的示例。</p> <p>首先，您需要在您的项目中添加 Hystrix 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableCircuitBreaker</code> 注解来启用断路器功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span></span><span class="token class-name">EnableCircuitBreaker</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableCircuitBreaker</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HystrixApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HystrixApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您可以在您的应用程序中使用 <code>@HystrixCommand</code> 注解来为您的方法添加断路器功能。例如，假设您有一个方法用于调用远程服务，您可以使用以下代码来为该方法添加断路器功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixCommand</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>restTemplate <span class="token operator">=</span> restTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://my-service/hello&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在上面的代码中，我们使用 <code>@HystrixCommand</code> 注解来为 <code>hello</code> 方法添加断路器功能。当调用远程服务失败时，Hystrix 将自动调用 <code>fallback</code> 方法来返回一个备选结果。</p> <h4 id="sentinel的基本使用"><a href="#sentinel的基本使用" class="header-anchor">#</a> Sentinel的基本使用</h4> <p>Sentinel 是一个流量控制和熔断降级组件，它可以帮助您的应用程序在面对流量高峰或依赖的服务出现故障时保持可用。</p> <p>下面是一个简单的使用 Sentinel 的示例。</p> <p>首先，您需要在您的项目中添加 Sentinel 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，您需要在您的配置文件中添加一些 Sentinel 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面的配置指定了 Sentinel 控制台的地址。您需要运行一个 Sentinel 控制台来管理您的应用程序的流量控制规则。</p> <p>接下来，您可以在您的应用程序中使用 <code>@SentinelResource</code> 注解来为您的方法添加流量控制功能。例如，假设您有一个方法用于处理用户请求，您可以使用以下代码来为该方法添加流量控制功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>csp<span class="token punctuation">.</span>sentinel<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SentinelResource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;fallback&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在上面的代码中，我们使用 <code>@SentinelResource</code> 注解来为 <code>hello</code> 方法添加流量控制功能。当该方法的流量超过预设阈值时，Sentinel 将自动调用 <code>fallback</code> 方法来返回一个备选结果。</p> <h4 id="feign的基本使用"><a href="#feign的基本使用" class="header-anchor">#</a> Feign的基本使用</h4> <p>Feign 是一个声明式的 REST 客户端，它可以帮助您简化远程服务调用的代码。</p> <p>下面是一个简单的使用 Feign 的示例。</p> <p>首先，您需要在您的项目中添加 Feign 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableFeignClients</code> 注解来启用 Feign 客户端功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">EnableFeignClients</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeignApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">FeignApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您可以创建一个接口，并使用 <code>@FeignClient</code> 注解来定义一个 Feign 客户端。例如，假设您有一个名为 <code>my-service</code> 的服务，您可以使用以下代码来定义一个 Feign 客户端：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;my-service&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyServiceClient</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>现在，您可以在您的应用程序中注入 <code>MyServiceClient</code> 接口，并使用它来调用远程服务。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">MyServiceClient</span> myServiceClient<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> myServiceClient<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="dubbo的基本使用"><a href="#dubbo的基本使用" class="header-anchor">#</a> Dubbo的基本使用</h4> <p>Dubbo 是一个分布式服务框架，它可以帮助您实现服务之间的远程调用。</p> <p>下面是一个简单的使用 Dubbo 的示例。</p> <p>首先，您需要在您的项目中添加 Dubbo 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，您需要定义一个服务接口，并在服务提供方实现该接口。例如，假设您有一个名为 <code>MyService</code> 的服务接口，您可以使用以下代码来定义该接口：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>接下来，您需要在服务提供方实现该接口，并使用 <code>@Service</code> 注解来将其暴露为 Dubbo 服务：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MyService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>现在，您可以在服务消费方使用 <code>@Reference</code> 注解来引用该服务。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Reference</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConsumer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Reference</span>
    <span class="token keyword">private</span> <span class="token class-name">MyService</span> myService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> myService<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="zuul的基本使用"><a href="#zuul的基本使用" class="header-anchor">#</a> zuul的基本使用</h4> <p>Zuul 是一个 API 网关组件，它可以帮助您管理和路由您的微服务架构中的请求。</p> <p>下面是一个简单的使用 Zuul 的示例。</p> <p>首先，您需要在您的项目中添加 Zuul 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-zuul<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，在您的应用程序主类上添加 <code>@EnableZuulProxy</code> 注解来启用 Zuul 网关功能：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>zuul<span class="token punctuation">.</span></span><span class="token class-name">EnableZuulProxy</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableZuulProxy</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZuulApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ZuulApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>接下来，您需要在您的配置文件中添加一些 Zuul 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">zuul</span><span class="token punctuation">:</span>
  <span class="token key atrule">routes</span><span class="token punctuation">:</span>
    <span class="token key atrule">my-service</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /my<span class="token punctuation">-</span>service/<span class="token important">**</span>
      <span class="token key atrule">serviceId</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面的配置定义了一个路由规则，它将所有以 <code>/my-service/</code> 开头的请求路由到名为 <code>my-service</code> 的服务。</p> <p>现在，您可以运行您的应用程序来启动 Zuul 网关。当您向 Zuul 发送请求时，它将根据您定义的路由规则将请求路由到相应的服务。</p> <h4 id="gateway的基本使用"><a href="#gateway的基本使用" class="header-anchor">#</a> gateway的基本使用</h4> <p>Spring Cloud Gateway 是一个 API 网关组件，它可以帮助您管理和路由您的微服务架构中的请求。</p> <p>下面是一个简单的使用 Spring Cloud Gateway 的示例。</p> <p>首先，您需要在您的项目中添加 Spring Cloud Gateway 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后，您需要在您的配置文件中添加一些 Spring Cloud Gateway 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>service
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//my<span class="token punctuation">-</span>service
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/my<span class="token punctuation">-</span>service/<span class="token important">**</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面的配置定义了一个路由规则，它将所有以 <code>/my-service/</code> 开头的请求路由到名为 <code>my-service</code> 的服务。</p> <p>现在，您可以运行您的应用程序来启动 Spring Cloud Gateway。当您向 Spring Cloud Gateway 发送请求时，它将根据您定义的路由规则将请求路由到相应的服务。</p> <h4 id="sleuth、zipkin的基本使用"><a href="#sleuth、zipkin的基本使用" class="header-anchor">#</a> sleuth、zipkin的基本使用</h4> <p>Sleuth 和 Zipkin 是两个用于分布式跟踪的组件，它们可以帮助您跟踪和调试您的微服务架构中的请求。</p> <p>下面是一个简单的使用 Sleuth 和 Zipkin 的示例。</p> <p>首先，您需要在您的项目中添加 Sleuth 和 Zipkin 的依赖：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-sleuth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-sleuth-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后，您需要在您的配置文件中添加一些 Sleuth 和 Zipkin 的配置，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">zipkin</span><span class="token punctuation">:</span>
    <span class="token key atrule">base-url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>9411/
  <span class="token key atrule">sleuth</span><span class="token punctuation">:</span>
    <span class="token key atrule">sampler</span><span class="token punctuation">:</span>
      <span class="token key atrule">probability</span><span class="token punctuation">:</span> <span class="token number">1.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面的配置指定了 Zipkin 服务端的地址，并将采样率设置为 100%。</p> <p>现在，您可以运行您的应用程序来启动 Sleuth 和 Zipkin。当您的应用程序处理请求时，Sleuth 将自动为每个请求生成一个跟踪 ID，并将跟踪信息发送到 Zipkin 服务端。</p> <p>您可以访问 Zipkin 控制台来查看您的应用程序的跟踪信息。</p> <h2 id="kubenetes"><a href="#kubenetes" class="header-anchor">#</a> Kubenetes</h2> <h3 id="pod"><a href="#pod" class="header-anchor">#</a> Pod</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1 <span class="token comment"># 指定 Kubernetes API 的版本</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod <span class="token comment"># 指定资源类型为 Pod</span>
<span class="token key atrule">metadata</span><span class="token punctuation">:</span> <span class="token comment"># 资源元数据</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx <span class="token comment"># Pod 的名称</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> dev <span class="token comment"># Pod 所属的命名空间</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span> <span class="token comment"># Pod 的标签，用于标识和选择 Pod</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.0&quot;</span> <span class="token comment"># 自定义标签，表示版本号</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span> <span class="token string">&quot;test&quot;</span> <span class="token comment"># 自定义标签，表示环境类型</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span> <span class="token comment"># Pod 的规格描述</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span> <span class="token comment"># Pod 中的容器列表</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>latest <span class="token comment"># 容器使用的镜像</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> pod <span class="token comment"># 容器的名称</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span> <span class="token comment"># 容器暴露的端口列表</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>port <span class="token comment"># 端口的名称</span>
      <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span> <span class="token comment"># 容器内部的端口号</span>
      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP <span class="token comment"># 端口使用的协议</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="pod-重启策略"><a href="#pod-重启策略" class="header-anchor">#</a> Pod 重启策略</h3> <ul><li>Always ：容器失效时，自动重启该容器，这也是默认值。</li> <li>OnFailure ： 容器终止运行且退出码不为0时重启</li> <li>Never ： 不论状态为何，都不重启该容器</li></ul> <h3 id="pod调度"><a href="#pod调度" class="header-anchor">#</a> Pod调度</h3> <ul><li>自动调度：运行在哪个节点上完全由Scheduler经过一系列的算法计算得出</li> <li>定向调度：NodeName、NodeSelector</li> <li>亲和性调度：NodeAffinity、PodAffinity、PodAntiAffinity</li> <li>污点（容忍）调度：Taints、Toleration</li></ul> <h3 id="pod控制器"><a href="#pod控制器" class="header-anchor">#</a> Pod控制器</h3> <ul><li>ReplicaSet：ReplicaSet的主要作用是保证一定数量的pod正常运行，它会持续监听这些Pod的运行状态，一旦Pod发生故障，就会重启或重建。</li> <li>Deployment：这种控制器并不直接管理pod，而是通过管理ReplicaSet来简介管理Pod，即：Deployment管理ReplicaSet，ReplicaSet管理Pod。所以Deployment比ReplicaSet功能更加强大。</li> <li>HPA：其实HPA与之前的Deployment一样，也属于一种Kubernetes资源对象，它通过追踪分析RC控制的所有目标Pod的负载变化情况，来确定是否需要针对性地调整目标Pod的副本数，这是HPA的实现原理。</li></ul></div></div>  <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/68d5c9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">java虚拟机</div></a> <a href="/pages/2b3d9d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redis</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/68d5c9/" class="prev">java虚拟机</a></span> <span class="next"><a href="/pages/2b3d9d/">Redis</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/d2b13d/"><div>
            实习技术
            <!----></div></a> <span class="date">08-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/39be8a/"><div>
            sql
            <!----></div></a> <span class="date">07-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/4375ac/"><div>
            git命令
            <!----></div></a> <span class="date">07-26</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://www.zhihu.com/people/zhi-qing-72-50" title="知乎" target="_blank" class="iconfont icon-zhihu"></a><a href="https://github.com/jinhua0" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://space.bilibili.com/352135891?spm_id_from=333.337.0.0" title="blibli" target="_blank" class="iconfont icon-bilibili"></a><a href="er2578912608@163.com" title="邮箱" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.7087f587.js" defer></script><script src="/assets/js/2.e7663ce2.js" defer></script><script src="/assets/js/11.f6e4b5e5.js" defer></script>
  </body>
</html>
