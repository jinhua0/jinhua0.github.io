<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实习技术 | 不爱吃鸭脖</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="晋华的个人博客">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.d9c8cf8c.css" as="style"><link rel="preload" href="/assets/js/app.7087f587.js" as="script"><link rel="preload" href="/assets/js/2.e7663ce2.js" as="script"><link rel="preload" href="/assets/js/29.a1a1cb6d.js" as="script"><link rel="prefetch" href="/assets/js/10.1f7e226f.js"><link rel="prefetch" href="/assets/js/11.f6e4b5e5.js"><link rel="prefetch" href="/assets/js/12.fc105dd9.js"><link rel="prefetch" href="/assets/js/13.af686786.js"><link rel="prefetch" href="/assets/js/14.b8a0a679.js"><link rel="prefetch" href="/assets/js/15.28175aeb.js"><link rel="prefetch" href="/assets/js/16.5de6a1ae.js"><link rel="prefetch" href="/assets/js/17.83f91d5b.js"><link rel="prefetch" href="/assets/js/18.c25ff30b.js"><link rel="prefetch" href="/assets/js/19.9eb4ef0f.js"><link rel="prefetch" href="/assets/js/20.6a684d39.js"><link rel="prefetch" href="/assets/js/21.95b0c4ac.js"><link rel="prefetch" href="/assets/js/22.e5cf9121.js"><link rel="prefetch" href="/assets/js/23.8d6ef789.js"><link rel="prefetch" href="/assets/js/24.83813c9e.js"><link rel="prefetch" href="/assets/js/25.669474a8.js"><link rel="prefetch" href="/assets/js/26.3287bee0.js"><link rel="prefetch" href="/assets/js/27.3841e5e7.js"><link rel="prefetch" href="/assets/js/28.cb5633ac.js"><link rel="prefetch" href="/assets/js/3.c4ac17a7.js"><link rel="prefetch" href="/assets/js/30.52a15d68.js"><link rel="prefetch" href="/assets/js/31.a07d8889.js"><link rel="prefetch" href="/assets/js/32.d09edb84.js"><link rel="prefetch" href="/assets/js/33.06ef6d42.js"><link rel="prefetch" href="/assets/js/34.6da289f6.js"><link rel="prefetch" href="/assets/js/35.ee22a4e9.js"><link rel="prefetch" href="/assets/js/36.8d8c7fba.js"><link rel="prefetch" href="/assets/js/37.b28f22e1.js"><link rel="prefetch" href="/assets/js/4.242d147b.js"><link rel="prefetch" href="/assets/js/5.b37386e0.js"><link rel="prefetch" href="/assets/js/6.ccd319ae.js"><link rel="prefetch" href="/assets/js/7.80d5da9b.js"><link rel="prefetch" href="/assets/js/8.47418624.js"><link rel="prefetch" href="/assets/js/9.e059bdba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d9c8cf8c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="不爱吃鸭脖" class="logo"> <span class="site-name can-hide">不爱吃鸭脖</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a9075a/" class="nav-link">Java</a></div><div class="nav-item"><a href="/pages/bc95b0/" class="nav-link">算法</a></div><div class="nav-item"><a href="/pages/6b46d1/" class="nav-link">k8s</a></div><div class="nav-item"><a href="/pages/652125/" class="nav-link">日常</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/jinhua0" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>不爱吃鸭脖</h3> <span>小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a9075a/" class="nav-link">Java</a></div><div class="nav-item"><a href="/pages/bc95b0/" class="nav-link">算法</a></div><div class="nav-item"><a href="/pages/6b46d1/" class="nav-link">k8s</a></div><div class="nav-item"><a href="/pages/652125/" class="nav-link">日常</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/jinhua0" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/652125/" class="sidebar-link">私密连接</a></li><li><a href="/pages/7f8267/" class="sidebar-link">手写一个简易RPC</a></li><li><a href="/pages/71c628/" class="sidebar-link">设计模式</a></li><li><a href="/pages/7b27c5/" class="sidebar-link">简易Spring</a></li><li><a href="/pages/d371fc/" class="sidebar-link">牛客社区项目</a></li><li><a href="/pages/141489/" class="sidebar-link">idea快捷键</a></li><li><a href="/pages/d2b13d/" aria-current="page" class="active sidebar-link">实习技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#负载均衡" class="sidebar-link">负载均衡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#什么是nginx-为什么要用nginx-nginx有哪些优势" class="sidebar-link">什么是Nginx,为什么要用Nginx,Nginx有哪些优势</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#为什么nginx支持这么高的并发" class="sidebar-link">为什么Nginx支持这么高的并发</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#正向代理、反向代理区别" class="sidebar-link">正向代理、反向代理区别</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#nginx是如何工作的" class="sidebar-link">Nginx是如何工作的</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#nginx-压缩了解吗-如何开启压缩" class="sidebar-link">Nginx 压缩了解吗，如何开启压缩？</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#nginx-有哪些负载均衡策略" class="sidebar-link">Nginx 有哪些负载均衡策略</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#nginx-限流" class="sidebar-link">Nginx 限流</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#kafka" class="sidebar-link">Kafka</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka如何保证分区顺序的" class="sidebar-link">Kafka如何保证分区顺序的</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka高性能的原因" class="sidebar-link">Kafka高性能的原因</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka高可用" class="sidebar-link">Kafka高可用</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka如何保证数据不丢失" class="sidebar-link">Kafka如何保证数据不丢失</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka-消息投递有且仅有一次语义怎么实现" class="sidebar-link">Kafka 消息投递有且仅有一次语义怎么实现</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka消息消费的实时性如何" class="sidebar-link">Kafka消息消费的实时性如何</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka异步流程" class="sidebar-link">Kafka异步流程</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#kafka短轮询有哪些优化方法" class="sidebar-link">kafka短轮询有哪些优化方法</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#netty" class="sidebar-link">Netty</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#线程模型" class="sidebar-link">线程模型</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#线程之间的交互通信方式" class="sidebar-link">线程之间的交互通信方式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#数据库的设计" class="sidebar-link">数据库的设计</a></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#如何设计一个高并发系统" class="sidebar-link">如何设计一个高并发系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#高并发常见的瓶颈问题" class="sidebar-link">高并发常见的瓶颈问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#具体方案措施" class="sidebar-link">具体方案措施</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#一些常规的优化" class="sidebar-link">一些常规的优化</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#订单微服务" class="sidebar-link">订单微服务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#订单基本概念" class="sidebar-link">订单基本概念</a></li><li class="sidebar-sub-header level4"><a href="/pages/d2b13d/#订单中心" class="sidebar-link">订单中心</a></li><li class="sidebar-sub-header level4"><a href="/pages/d2b13d/#订单状态" class="sidebar-link">订单状态</a></li><li class="sidebar-sub-header level4"><a href="/pages/d2b13d/#订单流程" class="sidebar-link">订单流程</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#订单微服务整体架构" class="sidebar-link">订单微服务整体架构</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#接口幂等" class="sidebar-link">接口幂等</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#如何保证秒杀的时候不超卖和出现重复消费的情况" class="sidebar-link">如何保证秒杀的时候不超卖和出现重复消费的情况？</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#如何设计数据库连接池" class="sidebar-link">如何设计数据库连接池</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#如何设计aop" class="sidebar-link">如何设计AOP</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#设计秒杀系统" class="sidebar-link">设计秒杀系统</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d2b13d/#linux指令" class="sidebar-link">Linux指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#常用的一些命令" class="sidebar-link">常用的一些命令</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#grep-的常用用法" class="sidebar-link">grep 的常用用法</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#文件数据量大-查看文件内容" class="sidebar-link">文件数据量大，查看文件内容</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#linux-中查找端口并找到流量最大的端口" class="sidebar-link">Linux 中查找端口并找到流量最大的端口</a></li><li class="sidebar-sub-header level3"><a href="/pages/d2b13d/#git常用指令" class="sidebar-link">git常用指令</a></li></ul></li></ul></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%85%B6%E5%AE%83" title="分类" data-v-06225672>其它</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/jinhua0" target="_blank" title="作者" class="beLink" data-v-06225672>jinhua</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">实习技术<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> 负载均衡</h2> <h3 id="什么是nginx-为什么要用nginx-nginx有哪些优势"><a href="#什么是nginx-为什么要用nginx-nginx有哪些优势" class="header-anchor">#</a> 什么是Nginx,为什么要用Nginx,Nginx有哪些优势</h3> <p>Nginx 是一个高性能的 HTTP 和反向代理 web 服务器。
Nginx 优势：</p> <ul><li>高并发连接：Nginx 能够支持数以万计的并发连接</li> <li>配置使用简单
总结 就是性能高、稳定。</li></ul> <h3 id="为什么nginx支持这么高的并发"><a href="#为什么nginx支持这么高的并发" class="header-anchor">#</a> 为什么Nginx支持这么高的并发</h3> <ul><li>事件驱动，IO多路复用的</li> <li>多线程</li></ul> <h3 id="正向代理、反向代理区别"><a href="#正向代理、反向代理区别" class="header-anchor">#</a> 正向代理、反向代理区别</h3> <p>正向代理： 客户端的代理
反向代理： 服务端的代理</p> <h3 id="nginx是如何工作的"><a href="#nginx是如何工作的" class="header-anchor">#</a> Nginx是如何工作的</h3> <p>Nginx一般启动一个master进程 和 多个worker进程，master进程负责管理worker进程，worker进程负责处理客户端请求。</p> <h3 id="nginx-压缩了解吗-如何开启压缩"><a href="#nginx-压缩了解吗-如何开启压缩" class="header-anchor">#</a> Nginx 压缩了解吗，如何开启压缩？</h3> <p>gzip压缩文件，节省带宽，提高传输效率</p> <h3 id="nginx-有哪些负载均衡策略"><a href="#nginx-有哪些负载均衡策略" class="header-anchor">#</a> Nginx 有哪些负载均衡策略</h3> <ol><li>轮询</li> <li>IP哈希</li> <li>最小连接数</li> <li>权重weight</li></ol> <h3 id="nginx-限流"><a href="#nginx-限流" class="header-anchor">#</a> Nginx 限流</h3> <ol><li>控制速率</li> <li>控制并发连接数</li></ol> <h2 id="kafka"><a href="#kafka" class="header-anchor">#</a> Kafka</h2> <h3 id="kafka如何保证分区顺序的"><a href="#kafka如何保证分区顺序的" class="header-anchor">#</a> Kafka如何保证分区顺序的</h3> <p>kafka的分区 是 基于日志文件 实现的， 消息按照它们的到来顺序写入日志文件</p> <h3 id="kafka高性能的原因"><a href="#kafka高性能的原因" class="header-anchor">#</a> Kafka高性能的原因</h3> <ul><li>零拷贝，不需要把数据从内核缓存区拷贝到用户空间</li> <li>数据压缩，传输的数据进行压缩，减少传输数据量</li> <li>Kafka 异步操作</li></ul> <h3 id="kafka高可用"><a href="#kafka高可用" class="header-anchor">#</a> Kafka高可用</h3> <ul><li>副本 机制 ： 分区有多个副本，分区分布在多个broker，某个broker故障，数据从其它broker恢复(数据备份)</li> <li>ISR 机制 ： 维护一个 leader副本 同步分区副本的集合，只有ISR集合里的才可以被选为leader</li> <li>ACK 机制 ： 对应分区 如果写入成功消息的话，就会发送ACK确认信息</li></ul> <h3 id="kafka如何保证数据不丢失"><a href="#kafka如何保证数据不丢失" class="header-anchor">#</a> Kafka如何保证数据不丢失</h3> <ul><li>持久化日志</li> <li>副本机制</li> <li>ACK机制</li></ul> <h3 id="kafka-消息投递有且仅有一次语义怎么实现"><a href="#kafka-消息投递有且仅有一次语义怎么实现" class="header-anchor">#</a> Kafka 消息投递有且仅有一次语义怎么实现</h3> <p>Kafka 通过事务机制可以实现对多个 topic 的多个 partition 的原子性的写入，即处于同一个事务内的所有消息，不管最终需要落地到哪个 topic 的哪个 partition, 最终结果都是要么全部写成功，要么全部写失败（Atomic multi-partition writes）。
就比如说，下单数据，支付成功 与 库存扣减消息，这两个消息应该是原子操作的，所以得放到事务里。</p> <h3 id="kafka消息消费的实时性如何"><a href="#kafka消息消费的实时性如何" class="header-anchor">#</a> Kafka消息消费的实时性如何</h3> <ul><li>Kafka消费方是 拉取的方式获取消息的，消费方可以控制消费速率</li> <li>Kakfa消费方消费消息的时候，其实可以并行的消费，加快消费速率</li> <li>Kafka 可以设置消费组， 数据量大的时候 可以消费组消费Topic不同分区的消息</li></ul> <h3 id="kafka异步流程"><a href="#kafka异步流程" class="header-anchor">#</a> Kafka异步流程</h3> <p>在 Kafka 中，生产者发送消息的过程是异步的。这意味着当生产者调用 <code>send</code> 方法时，消息会被存储在一个缓冲区中，而不是立即发送到服务器。这样，生产者可以继续执行其他操作，而不必等待消息发送完成。</p> <p>Kafka 生产者端有两个线程：主线程和 sender IO 线程。当用户调用 <code>send</code> 方法时，消息会被缓存到 RecordAccumulator 中，<code>send</code> 方法会立即返回，此时并不能确定消息是否真正发送到 broker。sender IO 线程会不断轮询 RecordAccumulator，满足一定条件后就进行真正的网络 IO 发送，使用的是异步非阻塞的 NIO。</p> <p>当缓冲区中的消息数量达到一定阈值（由 <code>batch.size</code> 参数控制）或者距离上一次发送的时间超过一定间隔（由 <code>linger.ms</code> 参数控制）时，sender IO 线程会将缓冲区中的消息批量发送到服务器。此外，用户也可以调用 <code>flush</code> 方法来强制发送缓冲区中的所有消息。</p> <p>总之，在 Kafka 中，生产者发送消息的过程是异步的。生产者将消息存储在缓冲区中，并由 sender IO 线程负责将缓冲区中的消息批量发送到服务器。这种方式可以提高生产者的吞吐量，并减少网络传输压力。</p> <p>Kafka 消费者是基于拉模式的，即消费者主动向服务端发起请求来拉取消息。Kafka 中的消息消费是一个不断轮询的过程，消费者所要做的就是重复地调用 <code>poll()</code> 方法，而 <code>poll()</code> 方法返回的是所订阅主题（或分区）上的一组消息³。</p> <p>Kafka 消费者并不是通过操作系统异步回调来实现异步消费消息的。相反，它是通过消费者自己不断轮询来获取新的消息。这种方式可以让消费者更好地控制消息获取的速度和时间，从而保证消息消费的实时性。</p> <h3 id="kafka短轮询有哪些优化方法"><a href="#kafka短轮询有哪些优化方法" class="header-anchor">#</a> kafka短轮询有哪些优化方法</h3> <ul><li>并行消费</li> <li>消费组消费</li> <li>Kafka 时间轮算法实现延迟队列</li></ul> <h2 id="netty"><a href="#netty" class="header-anchor">#</a> Netty</h2> <h3 id="线程模型"><a href="#线程模型" class="header-anchor">#</a> 线程模型</h3> <p>两组线程池：</p> <ul><li>BossGroup线程池， 负责接收连接请求，并将请求封装进NioSocketChannel</li> <li>WorkerGroup线程池， 负责处理连接上的IO操作</li></ul> <h3 id="线程之间的交互通信方式"><a href="#线程之间的交互通信方式" class="header-anchor">#</a> 线程之间的交互通信方式</h3> <ul><li>共享内存</li> <li>管道</li> <li>消息队列</li> <li>RPC</li> <li>线程同步机制</li></ul> <h2 id="数据库的设计"><a href="#数据库的设计" class="header-anchor">#</a> 数据库的设计</h2> <h2 id="如何设计一个高并发系统"><a href="#如何设计一个高并发系统" class="header-anchor">#</a> 如何设计一个高并发系统</h2> <p>高并发系统就是可以理解为设计一个系统，保证整体可用的同时，能够处理很高的并发用户请求，可以承受住很大的流量冲击。<a href="https://zhuanlan.zhihu.com/p/597249336#:~:text=%E5%AD%97%E8%8A%82%E4%B8%89%E9%9D%A2%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E9%AB%98%E5%B9%B6%E5%8F%91%E7%B3%BB%E7%BB%9F%201%201.%20%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B%EF%BC%8C%E6%A8%AA%E5%90%91%E6%89%A9%E5%B1%95%202%202.%20%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86%EF%BC%88%E7%B3%BB%E7%BB%9F%E6%8B%86%E5%88%86%EF%BC%89%203,%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%207%207.%20CDN%EF%BC%8C%E5%8A%A0%E9%80%9F%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%208%208.%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%8C%E5%89%8A%E9%94%8B%20%E6%9B%B4%E5%A4%9A%E9%A1%B9%E7%9B%AE" target="_blank" rel="noopener noreferrer">高并发<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="高并发常见的瓶颈问题"><a href="#高并发常见的瓶颈问题" class="header-anchor">#</a> 高并发常见的瓶颈问题</h3> <ul><li>内存不足</li> <li>磁盘空间不足</li> <li>连接数不足</li> <li>网络带宽不够</li></ul> <h3 id="具体方案措施"><a href="#具体方案措施" class="header-anchor">#</a> 具体方案措施</h3> <ol><li>分布式集群部署</li> <li>微服务拆分</li> <li>分库分表</li> <li>池化技术</li> <li>主从分离</li> <li>使用缓存</li> <li>CDN，加速静态资源访问</li> <li>消息队列，削锋，降级熔断，限流</li> <li>异步</li></ol> <h3 id="一些常规的优化"><a href="#一些常规的优化" class="header-anchor">#</a> 一些常规的优化</h3> <ol><li>在一次连接上批量操作数据库</li> <li>异步思想</li> <li>空间换时间，可以用缓存</li> <li>异步非阻塞思想，IO多路复用</li> <li>资源访问由串行变为并行</li> <li>锁的粒度避免过粗</li> <li>加索引</li> <li>优化SQL</li> <li>避免大事务问题</li> <li>优化深分页问题(标签记录法/延迟关联法)</li> <li>压缩传输内容</li> <li>海量数据处理，可以考虑用NoSQL，像ES之类</li> <li>JVM FULLGC，线程太多，IO太多资源没关闭</li></ol> <h2 id="订单微服务"><a href="#订单微服务" class="header-anchor">#</a> 订单微服务</h2> <h3 id="订单基本概念"><a href="#订单基本概念" class="header-anchor">#</a> 订单基本概念</h3> <h4 id="订单中心"><a href="#订单中心" class="header-anchor">#</a> 订单中心</h4> <ul><li>用户信息</li> <li>订单信息</li> <li>商品信息</li> <li>物流信息</li> <li>优惠促销信息</li></ul> <h4 id="订单状态"><a href="#订单状态" class="header-anchor">#</a> 订单状态</h4> <ul><li>创建订单</li> <li>已付款</li></ul> <h4 id="订单流程"><a href="#订单流程" class="header-anchor">#</a> 订单流程</h4> <p>订单生成 -&gt; 支付订单 -&gt; 卖家发货 -&gt; 确认收货 -&gt; 交易完成
下单， 下单数据校验，查询商品信息，优惠信息，运费信息等等，  库存锁定， 订单生成；
订单支付，  支付回调， 发送异步消息 同步物流
订单签收， 订单已完成</p> <h3 id="订单微服务整体架构"><a href="#订单微服务整体架构" class="header-anchor">#</a> 订单微服务整体架构</h3> <h3 id="接口幂等"><a href="#接口幂等" class="header-anchor">#</a> 接口幂等</h3> <ul><li>Token</li> <li>加锁</li> <li>唯一性约束</li> <li>防重表</li> <li>全局请求唯一ID</li></ul> <h3 id="如何保证秒杀的时候不超卖和出现重复消费的情况"><a href="#如何保证秒杀的时候不超卖和出现重复消费的情况" class="header-anchor">#</a> 如何保证秒杀的时候不超卖和出现重复消费的情况？</h3> <ul><li>乐观锁或悲观锁来控制库存</li> <li>使用消息队列来削峰，控制请求流量</li> <li>限流</li></ul> <h3 id="如何设计数据库连接池"><a href="#如何设计数据库连接池" class="header-anchor">#</a> 如何设计数据库连接池</h3> <p>数据库连接池是一种用于管理数据库连接的技术。它的基本原理是在内部对象池中维护一定数量的数据库连接，并对外暴露数据库连接获取和返回方法。例如，外部使用者可以通过 <code>getConnection</code> 方法获取连接，使用完毕后再通过 <code>releaseConnection</code> 方法将连接返回。此时，连接并没有关闭，而是由连接池管理器回收，并为下一次使用做好准备¹。</p> <p>数据库连接池的优势在于资源重用，由于数据库连接得到重用，避免了频繁创建、释放连接引起的大量性能开销。同时，在减少系统消耗的基础上，另一方面也增进了系统运行环境的平稳性（减少内存碎片以及数据库临时进程/线程的数量）。此外，数据库连接池还能提供更快的系统响应速度，因为在初始化过程中，往往已经创建了若干数据库连接置于池中备用。此时连接的初始化工作均已完成。对于业务请求处理而言，直接利用现有可用连接，避免了数据库连接初始化和释放过程的时间开销，从而缩减了系统整体响应时间。</p> <p>设计一个数据库连接池需要考虑许多因素，包括最大活跃数、最大空闲数、最大空闲时间等参数。</p> <h3 id="如何设计aop"><a href="#如何设计aop" class="header-anchor">#</a> 如何设计AOP</h3> <p>如果我要设计一个AOP（面向切面编程），我会考虑以下几个方面：</p> <ol><li><p><strong>定义切面</strong>：首先，我需要定义切面，即确定哪些功能需要被抽离出来，以便在不影响核心业务逻辑的情况下进行维护和管理。例如，日志统计、打点上报、异常处理等功能都可以被抽离出来¹。</p></li> <li><p><strong>动态织入</strong>：其次，我需要考虑如何将这些功能动态织入到业务逻辑模块中。这可以通过预编译方式和运行期间动态代理实现³⁴。</p></li> <li><p><strong>切入点选择</strong>：接下来，我需要确定切入点，即选择哪些连接点需要被切入。这可以通过方法匹配表达式来实现²。</p></li> <li><p><strong>编程思路</strong>：最后，我需要考虑AOP的编程思路。由于AOP是针对方法调用进行编程的，因此我需要考虑如何捕获方法调用，并在代理过程中插入业务代码²。</p></li></ol> <p>总之，设计一个AOP需要考虑许多因素，包括切面定义、动态织入、切入点选择和编程思路等。</p> <h3 id="设计秒杀系统"><a href="#设计秒杀系统" class="header-anchor">#</a> 设计秒杀系统</h3> <ul><li>高并发</li> <li>高可用</li> <li>数据一致性</li> <li>安全性
对于一个秒杀系统，可以理解为很多请求去 抢100个名额，
首先 怎么保证服务器/数据库能承受住这么大的流量，</li> <li>负载均衡、动静分离(Nginx)、CDN加速(就近获取内容)、流量削峰，限流，熔断降级，异步处理，缓存，主从分离，读写分离</li> <li>库存预热，将库存信息需要从数据库中加载到缓存中，在缓存中查验 和 扣减库存
其次，就是如何让并发的请求正确消费这 100个名额</li></ul> <p>在分布式环境中，为了防止超卖，我们可以使用分布式锁。具体的实现方式有很多，这里以Redis为例来说明：</p> <ol><li><p><strong>加锁</strong>：当一个请求需要修改库存时，首先尝试获取锁。在Redis中，我们可以使用<code>SETNX</code>命令来实现。<code>SETNX</code>命令只有在key不存在时才会设置成功，因此可以保证只有一个请求能够获取到锁。为了防止死锁，我们还需要为锁设置一个过期时间，可以使用<code>EXPIRE</code>命令来实现。</p></li> <li><p><strong>设计key和value</strong>：在分布式锁中，key通常是需要保护的资源，例如商品的ID。value则可以是一个随机生成的唯一标识（例如UUID），用来标识锁的拥有者。</p></li> <li><p><strong>释放锁</strong>：当请求处理完毕后，需要释放锁。在Redis中，我们可以使用<code>DEL</code>命令来删除锁。但是为了防止误删其他请求的锁，我们需要先判断当前请求是否是锁的拥有者¹。这个操作需要是原子性的，因此我们可以使用Lua脚本来实现。</p></li></ol> <h2 id="linux指令"><a href="#linux指令" class="header-anchor">#</a> Linux指令</h2> <h3 id="常用的一些命令"><a href="#常用的一些命令" class="header-anchor">#</a> 常用的一些命令</h3> <p>在面试中，你可能会被问到以下一些常用的Linux命令：</p> <ol><li><p><strong>文件管理</strong>：<code>ls</code>（显示目录中的文件及其属性信息）¹²，<code>cp</code>（复制文件或目录）¹²，<code>mkdir</code>（创建目录）¹²，<code>mv</code>（移动或重命名文件）¹²，<code>pwd</code>（显示当前工作目录的路径）¹²，<code>tar</code>（压缩和解压缩文件）¹²。</p></li> <li><p><strong>文档编辑</strong>：<code>cat</code>（在终端设备上显示文件内容）²，<code>grep</code>（强大的文本搜索工具）²，<code>tail</code>（查看文件尾部内容）²。</p></li> <li><p><strong>系统管理</strong>：<code>find</code>（根据路径和条件搜索指定文件）²，<code>rpm</code>（RPM软件包管理器）²，<code>uname</code>（显示系统内核信息）²。</p></li> <li><p><strong>磁盘管理</strong>：<code>df</code>（显示磁盘空间使用量情况）²，<code>fdisk</code>（管理磁盘分区）²，<code>mount</code>（将文件系统挂载到目录）²。</p></li> <li><p><strong>文件传输</strong>： <code>tftp</code>（上传及下载文件）²， <code>rsync</code>（远程数据同步工具）².</p></li> <li><p><strong>网络通讯</strong>： <code>ssh</code>（安全的远程连接服务器）², <code>netstat</code>(显示网络状态)², <code>ping</code>(测试主机间网络连通性)².</p></li> <li><p><strong>设备管理</strong>： <code>mount</code>(将文件系统挂载到目录)², <code>lspci</code>(显示当前设备PCI总线设备信息)².</p></li> <li><p><strong>备份压缩</strong>： <code>zip</code>(压缩文件)², <code>gzip</code>(压缩和解压文件)².</p></li></ol> <h3 id="grep-的常用用法"><a href="#grep-的常用用法" class="header-anchor">#</a> grep 的常用用法</h3> <p>以下是一些 grep 的使用示例：</p> <p>在文件 file.txt 中查找字符串 “hello”，并打印匹配的行：
grep hello file.txt</p> <p>在文件夹 dir 中递归查找所有文件中匹配正则表达式 “pattern” 的行，并打印匹配行所在的文件名和行号：
grep -r -n pattern dir/</p> <p>在标准输入中查找字符串 “world”，并只打印匹配的行数：
echo &quot;hello world&quot; | grep -c world</p> <p>在当前目录中，查找后缀有 file 字样的文件中包含 test 字符串的文件，并打印出该字符串的行：
grep test *file</p> <h3 id="文件数据量大-查看文件内容"><a href="#文件数据量大-查看文件内容" class="header-anchor">#</a> 文件数据量大，查看文件内容</h3> <p>当文件数据量非常大时，我们可以使用一些特定的命令来查看文件内容，而不必打开整个文件。以下是一些常用的命令：</p> <ol><li><p><strong><code>less</code></strong>：<code>less</code> 命令可以用来查看大文件的内容。它允许你在文件中上下移动，这样你就可以遍历内容，然后在文件中回退¹。</p></li> <li><p><strong><code>head</code></strong>：如果只想看一个文件的前几行，可以用 <code>head</code> 命令¹。</p></li> <li><p><strong><code>tail</code></strong>：与 <code>head</code> 相对，<code>tail</code> 是只显示末尾几行。比如我们想查看一个文件的更新情况，只要看最后几行就可以了¹。</p></li> <li><p><strong><code>grep</code></strong>：从一个文件中查找到某个关键词，并将包含该关键词的行显示出来¹。</p></li> <li><p><strong><code>cat | more</code></strong>：这个命令组合可以用来分页查看文件内容⁴。</p></li> <li><p><strong><code>find / -type f -size +1G -print0 | xargs -0 du -h | sort -nr</code></strong>：这个命令组合可以用来查找大于1G的文件，并按照大小排序²。</p></li></ol> <h3 id="linux-中查找端口并找到流量最大的端口"><a href="#linux-中查找端口并找到流量最大的端口" class="header-anchor">#</a> Linux 中查找端口并找到流量最大的端口</h3> <p>在 Linux 中，<code>netstat</code> 命令可以用来显示网络状态，包括 TCP 和 UDP 连接、监听的端口、以及每个网络接口设备的状态信息¹²。然而，<code>netstat</code> 并不能直接显示每个端口的流量。要查看每个端口的流量，你可能需要使用其他的工具或方法。</p> <p>一种可能的方法是使用 <code>iftop</code> 或 <code>nethogs</code> 这样的工具来查看网络流量。这些工具可以显示每个连接的流量，从而让你找到流量最大的连接。然后，你可以使用 <code>netstat</code> 或 <code>ss</code> 命令来查看这些连接对应的端口。</p> <p>例如，你可以先使用 <code>nethogs</code> 来查看网络流量：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo nethogs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后，你可以使用 <code>netstat</code> 来查看对应的端口：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo netstat -tunlp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在这个命令中，<code>-tunlp</code> 参数表示显示 TCP (<code>-t</code>) 和 UDP (<code>-u</code>) 连接，不解析服务和主机名 (<code>-n</code>)，并显示监听的端口 (<code>-l</code>) 和对应的进程信息 (<code>-p</code>)。</p> <h3 id="git常用指令"><a href="#git常用指令" class="header-anchor">#</a> git常用指令</h3> <p>在面试中，你可能会被问到以下一些常用的Git命令：</p> <ol><li><strong><code>git config</code></strong>：配置信息¹³。</li> <li><strong><code>git init</code></strong>：初始化本地git仓库（创建新仓库）¹²。</li> <li><strong><code>git clone</code></strong>：拷贝一份远程仓库，也就是下载一个项目¹²。</li> <li><strong><code>git add</code></strong>：添加文件到暂存区¹²。</li> <li><strong><code>git commit</code></strong>：提交暂存区到本地仓库¹²。</li> <li><strong><code>git status</code></strong>：查看仓库当前的状态，显示有变更的文件¹³。</li> <li><strong><code>git diff</code></strong>：比较文件的不同，即暂存区和工作区的差异¹³。</li> <li><strong><code>git reset HEAD</code></strong>：取消缓存命令³。</li> <li><strong><code>git rm</code></strong>：将文件从暂存区和工作区中删除¹³。</li> <li><strong><code>git mv</code></strong>：移动或重命名工作区文件。</li></ol></div></div>  <div class="page-edit"><!----> <!----> <!----></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/141489/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">idea快捷键</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/141489/" class="prev">idea快捷键</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/39be8a/"><div>
            sql
            <!----></div></a> <span class="date">07-28</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/4375ac/"><div>
            git命令
            <!----></div></a> <span class="date">07-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/5c6c6b/"><div>
            Linux基本指令
            <!----></div></a> <span class="date">07-26</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://www.zhihu.com/people/zhi-qing-72-50" title="知乎" target="_blank" class="iconfont icon-zhihu"></a><a href="https://github.com/jinhua0" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://space.bilibili.com/352135891?spm_id_from=333.337.0.0" title="blibli" target="_blank" class="iconfont icon-bilibili"></a><a href="er2578912608@163.com" title="邮箱" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.7087f587.js" defer></script><script src="/assets/js/2.e7663ce2.js" defer></script><script src="/assets/js/29.a1a1cb6d.js" defer></script>
  </body>
</html>
